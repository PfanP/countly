(function(c,a){function d(){var c={cols:[],rows:[]};e=new google.visualization.GeoChart(document.getElementById(g));c.cols=[{id:"country",label:jQuery.i18n.map["countries.table.country"],type:"string"},{id:"total",label:jQuery.i18n.map["common.total"],type:"number"}];c.rows=_.map(f,function(b){b.country=i[b.country]||"Unknown";return"European Union"==b.country||"Unknown"==b.country?{c:[{v:""},{v:b.value}]}:{c:[{v:b.country},{v:b.value}]}});b=new google.visualization.DataTable(c);h.region="world";
h.resolution="countries";h.displayMode="region";e.draw(b,h)}var e,b,g="geo-chart",h={displayMode:"region",colorAxis:{minValue:0,colors:["#D7F1D8","#6BB96E"]},resolution:"countries",toolTip:{textStyle:{color:"#FF0000"},showColorCode:!1},legend:"none",backgroundColor:"transparent",datalessRegionColor:"#FFF"},f=[],i={};a.get("localization/countries/en/country.json",function(b){i=b});c.drawGeoChart=function(b,c){b&&(b.chartElementId&&(g=b.chartElementId),b.height&&(h.height=b.height,h.width=556*b.height/
347));f=c;google.visualization?d():google.load("visualization","1",{packages:["geochart"],callback:d})}})(window.countlyMapHelper=window.countlyMapHelper||{},jQuery);(function(c,a,d){var e={},b={},g="",h="",f=[],i=[],j={},k=0,l=!1,p=null;c.initialize=function(d){if(!d&&l&&p==countlyCommon.getPeriodForAjax()&&k==countlyCommon.ACTIVE_APP_KEY)return c.refresh();p=countlyCommon.getPeriodForAjax();if(countlyCommon.DEBUG)return e={2012:{}},!0;k=countlyCommon.ACTIVE_APP_KEY;l=!0;return a.when(a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"get_events",period:p},dataType:"jsonp",
success:function(a){b=a;!g&&c.getEvents()[0]&&(g=c.getEvents()[0].key)}}),a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"events",event:g,segmentation:h,period:p},dataType:"jsonp",success:function(b){e=b;j=e.meta||{};f=j.segments||[];f.sort();i=j[h]?j[h]:[]}})).then(function(){return!0})};c.refresh=function(){return countlyCommon.DEBUG?(e={2012:{}},!0):a.when(a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,
data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"get_events"},dataType:"jsonp",success:function(a){b=a;!g&&c.getEvents()[0]&&(g=c.getEvents()[0].key)}}),a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"events",action:"refresh",event:g,segmentation:h},dataType:"jsonp",success:function(b){countlyCommon.extendDbObj(e,b);for(var c in e.meta)j[c]=countlyCommon.union(j[c],e.meta[c]);
(f=j.segments)&&f.sort();i=j[h]?j[h]:[]}})).then(function(){return!0})};c.reset=function(){e={};b={};h=g="";f=[];i=[];j={};k=0;l=!1};c.refreshEvents=function(){if(countlyCommon.DEBUG)return b={},!0;a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"get_events"},dataType:"jsonp",success:function(a){b=a;!g&&c.getEvents()[0]&&(g=c.getEvents()[0].key)}})};c.setActiveEvent=function(b,d){e={};h="";f=[];i=[];j={};g=
b;a.when(c.initialize(!0)).then(d)};c.setActiveSegmentation=function(b,g){e={};h=b;a.when(c.initialize(!0)).then(g)};c.getActiveSegmentation=function(){return h?h:jQuery.i18n.map["events.no-segmentation"]};c.isSegmentedView=function(){return h?!0:!1};c.getEventData=function(){var a={},a=b?b.map?b.map:{}:{},n=a[g]&&a[g].count?a[g].count:jQuery.i18n.map["events.table.count"],f=a[g]&&a[g].sum?a[g].sum:jQuery.i18n.map["events.table.sum"];if(h){var a={chartData:{},chartDP:{dp:[],ticks:[]}},l=countlyCommon.extractTwoLevelData(e,
i,c.clearEventsObject,[{name:"curr_segment",func:function(b){return b.replace(/:/g,".").replace(/\[CLY\]/g,"")}},{name:"c"},{name:"s"}]);a.chartData=l.chartData;var l=_.pluck(a.chartData,"curr_segment").slice(0,15),j=_.pluck(a.chartData,"c"),k=_.without(_.pluck(a.chartData,"s"),!1,null,"",d,NaN),p=[{data:[],color:countlyCommon.GRAPH_COLORS[0]}];0==_.reduce(k,function(b,c){return b+c},0)&&(k=[]);k.length&&(p[p.length]={data:[],color:countlyCommon.GRAPH_COLORS[1]},p[1].data[0]=[-1,null],p[1].data[l.length+
1]=[l.length,null]);p[0].data[0]=[-1,null];p[0].data[l.length+1]=[l.length,null];a.chartDP.ticks.push([-1,""]);a.chartDP.ticks.push([l.length,""]);for(var t=0;t<l.length;t++)p[0].data[t+1]=[t,j[t]],k.length&&(p[1].data[t+1]=[t,k[t]]),a.chartDP.ticks.push([t,l[t]]);a.chartDP.dp=p;a.eventName=c.getEventLongName(g);a.dataLevel=2;a.tableColumns=[jQuery.i18n.map["events.table.segmentation"],n];k.length?a.tableColumns[a.tableColumns.length]=f:_.each(a.chartData,function(b,c,a){a[c]=_.pick(b,"curr_segment",
"c")})}else a=countlyCommon.extractChartData(e,c.clearEventsObject,[{data:[],label:n,color:countlyCommon.GRAPH_COLORS[0]},{data:[],label:f,color:countlyCommon.GRAPH_COLORS[1]}],[{name:"c"},{name:"s"}]),a.eventName=c.getEventLongName(g),a.dataLevel=1,a.tableColumns=[jQuery.i18n.map["common.date"],n],n=_.without(_.pluck(a.chartData,"s"),!1,null,"",d,NaN),0!=_.reduce(n,function(b,c){return b+c},0)?a.tableColumns[a.tableColumns.length]=f:(a.chartDP[1]=!1,a.chartDP=_.compact(a.chartDP),_.each(a.chartData,
function(b,c,a){a[c]=_.pick(b,"date","c")}));n=_.pluck(a.chartData,"c");n.length&&(a.totalCount=_.reduce(n,function(b,c){return b+c},0));n=_.pluck(a.chartData,"s");n.length&&(a.totalSum=_.reduce(n,function(b,c){return b+c},0));return a};c.getEvents=function(){for(var c=b?b.list?b.list:[]:[],a=b?b.map?b.map:{}:{},e=b?b.order?b.order:[]:[],d=[],h=[],i=0;i<c.length;i++){var f=h;-1!==e.indexOf(c[i])&&(f=d);a[c[i]]&&a[c[i]].name?f.push({key:c[i],name:a[c[i]].name,count:a[c[i]].count,sum:a[c[i]].sum,is_active:g==
c[i]}):f.push({key:c[i],name:c[i],count:"",sum:"",is_active:g==c[i]})}d=_.sortBy(d,function(b){return e.indexOf(b.key)});h=_.sortBy(h,function(b){return b.key});return d.concat(h)};c.getEventsWithSegmentations=function(){var c=b?b.segments?b.segments:[]:[],a=b?b.map?b.map:{}:{},g=[],e;for(e in c){a[e]&&a[e].name?g.push({key:e,name:a[e].name}):g.push({key:e,name:e});for(var d=0;d<c[e].length;d++)a[e]&&a[e].name?g.push({key:e,name:a[e].name+" / "+c[e][d]}):g.push({key:e,name:e+" / "+c[e][d]})}return g};
c.getEventMap=function(){for(var b=c.getEvents(),a={},g=0;g<b.length;g++)a[b[g].key]=b[g];return a};c.getEventLongName=function(c){var a=b?b.map?b.map:{}:{};return a[c]&&a[c].name?a[c].name:c};c.getEventSegmentations=function(){return f};c.clearEventsObject=function(b){b?(b.c||(b.c=0),b.s||(b.s=0)):b={c:0,s:0};return b};c.getEventSummary=function(){_periodObj=countlyCommon.periodObj;var a,d,f,l=a=0,k=0,j=0;if(_periodObj.isSpecialPeriod)for(var p=0;p<_periodObj.currentPeriodArr.length;p++){d=countlyCommon.getDescendantProp(e,
_periodObj.currentPeriodArr[p]);f=countlyCommon.getDescendantProp(e,_periodObj.previousPeriodArr[p]);d=c.clearEventsObject(d);f=c.clearEventsObject(f);if(h){var t=_.reduce(_.map(_.filter(d,function(b,c){return-1!=i.indexOf(c)}),function(b){return b.c||0}),function(b,c){return b+c},0);d=_.reduce(_.map(_.filter(d,function(b,c){return-1!=i.indexOf(c)}),function(b){return b.s||0}),function(b,c){return b+c},0);var y=_.reduce(_.map(_.filter(f,function(b,c){return-1!=i.indexOf(c)}),function(b){return b.c||
0}),function(b,c){return b+c},0);f=_.reduce(_.map(_.filter(f,function(b,c){return-1!=i.indexOf(c)}),function(b){return b.s||0}),function(b,c){return b+c},0);d={c:t,s:d};f={c:y,s:f}}a+=d.c;l+=f.c;k+=d.s;j+=f.s}else d=countlyCommon.getDescendantProp(e,_periodObj.activePeriod),f=countlyCommon.getDescendantProp(e,_periodObj.previousPeriod),d=c.clearEventsObject(d),f=c.clearEventsObject(f),h&&(t=_.reduce(_.map(_.filter(d,function(b,c){return-1!=i.indexOf(c)}),function(b){return b.c||0}),function(b,c){return b+
c},0),d=_.reduce(_.map(_.filter(d,function(b,c){return-1!=i.indexOf(c)}),function(b){return b.s||0}),function(b,c){return b+c},0),y=_.reduce(_.map(_.filter(f,function(b,c){return-1!=i.indexOf(c)}),function(b){return b.c||0}),function(b,c){return b+c},0),f=_.reduce(_.map(_.filter(f,function(b,c){return-1!=i.indexOf(c)}),function(b){return b.s||0}),function(b,c){return b+c},0),d={c:t,s:d},f={c:y,s:f}),a=d.c,l=f.c,k=d.s,j=f.s;l=countlyCommon.getPercentChange(l,a);j=countlyCommon.getPercentChange(j,k);
a={"event-total":{total:a,change:l.percent,trend:l.trend},"event-sum":{total:k,change:j.percent,trend:j.trend}};l=b?b.map?b.map:{}:{};j=l[g]&&l[g].count?l[g].count.toUpperCase():jQuery.i18n.map["events.count"];l=l[g]&&l[g].sum?l[g].sum.toUpperCase():jQuery.i18n.map["events.sum"];j={"class":"one-column",items:[{title:j,total:a["event-total"].total,trend:a["event-total"].trend}]};0!=k&&(j["class"]="two-column",j.items[j.items.length]={title:l,total:a["event-sum"].total,trend:a["event-sum"].trend});
return j};c.getMultiEventData=function(e,h){a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"events",events:JSON.stringify(e)},dataType:"jsonp",success:function(a){var e={},e=b?b.map?b.map:{}:{},i=e[g]&&e[g].count?e[g].count:jQuery.i18n.map["events.table.count"],f=e[g]&&e[g].sum?e[g].sum:jQuery.i18n.map["events.table.sum"],e=countlyCommon.extractChartData(a,c.clearEventsObject,[{data:[],label:i,color:countlyCommon.GRAPH_COLORS[0]},
{data:[],label:f,color:countlyCommon.GRAPH_COLORS[1]}],[{name:"c"},{name:"s"}]);e.eventName=c.getEventLongName(g);e.dataLevel=1;e.tableColumns=[jQuery.i18n.map["common.date"],i];a=_.without(_.pluck(e.chartData,"s"),!1,null,"",d,NaN);0!=_.reduce(a,function(b,c){return b+c},0)?e.tableColumns[e.tableColumns.length]=f:(e.chartDP[1]=!1,e.chartDP=_.compact(e.chartDP),_.each(e.chartData,function(b,c,a){a[c]=_.pick(b,"date","c")}));a=_.pluck(e.chartData,"c");a.length&&(e.totalCount=_.reduce(a,function(b,
c){return b+c},0));a=_.pluck(e.chartData,"s");a.length&&(e.totalSum=_.reduce(a,function(b,c){return b+c},0));h(e)}})}})(window.countlyEvent=window.countlyEvent||{},jQuery);(function(c){function a(){b=e.meta?e.meta["d-ranges"]?e.meta["d-ranges"]:[]:[]}var d={},e={},b=[];c.initialize=function(){e=countlyUser.getDbObj();a()};c.refresh=function(c){countlyCommon.extendDbObj(e,c);e.meta&&(b=countlyCommon.union(b,e.meta["d-ranges"]))};c.reset=function(){e={};a()};c.getSessionData=function(){d=countlyCommon.periodObj;var b={},a,f,i=b=0,j=0,k=0,l=0,p=0,v=0,n=0,r=0,u=0,z=0,A=0,D=0,t=0,y=!1;if(d.isSpecialPeriod){for(var y=!0,s=0;s<d.uniquePeriodArr.length;s++)a=countlyCommon.getDescendantProp(e,
d.uniquePeriodArr[s]),a=c.clearSessionObject(a),r+=a.u,j+=a.p,l+=a.m;for(var w=0,x=0,s=a=0;s<d.uniquePeriodCheckArr.length;s++)f=countlyCommon.getDescendantProp(e,d.uniquePeriodCheckArr[s]),f=c.clearSessionObject(f),w+=f.u,x+=f.p,a+=f.m;r>w&&(r=w);j>x&&(j=x);l>a&&(l=a);for(s=0;s<d.previousUniquePeriodArr.length;s++)f=countlyCommon.getDescendantProp(e,d.previousUniquePeriodArr[s]),f=c.clearSessionObject(f),u+=f.u,k+=f.p,p+=f.m;for(s=x=w=0;s<d.previousUniquePeriodCheckArr.length;s++)f=countlyCommon.getDescendantProp(e,
d.previousUniquePeriodCheckArr[s]),f=c.clearSessionObject(f),w+=f.u,x+=f.p;u>w&&(u=w);k>x&&(k=x);l>a&&(l=a);for(s=0;s<d.currentPeriodArr.length;s++)a=countlyCommon.getDescendantProp(e,d.currentPeriodArr[s]),f=countlyCommon.getDescendantProp(e,d.previousPeriodArr[s]),a=c.clearSessionObject(a),f=c.clearSessionObject(f),b+=a.t,i+=f.t,v+=a.n,n+=f.n,z+=a.d,A+=f.d,D+=a.e,t+=f.e}else a=countlyCommon.getDescendantProp(e,d.activePeriod),f=countlyCommon.getDescendantProp(e,d.previousPeriod),a=c.clearSessionObject(a),
f=c.clearSessionObject(f),b=a.t,i=f.t,v=a.n,n=f.n,r=a.u,u=f.u,z=a.d,A=f.d,D=a.e,t=f.e,j=a.p,k=f.p,l=a.m,p=f.m;s=z/60;w=0==i?0:A/60/i;a=0==b?0:s/b;var E=0==u?0:t/u;f=0==r?0:D/r;var i=countlyCommon.getPercentChange(i,b),z=countlyCommon.getPercentChange(A,z),A=countlyCommon.getPercentChange(w,a),w=countlyCommon.getPercentChange(n,v),x=countlyCommon.getPercentChange(u,r),n=countlyCommon.getPercentChange(u-n,v-v),t=countlyCommon.getPercentChange(t,D),E=countlyCommon.getPercentChange(E,f),F=countlyCommon.getPercentChange(k,
j),G=countlyCommon.getPercentChange(p,l),m={total:[],nev:[],unique:[],returning:[],"total-time":[],"avg-time":[],events:[],"avg-events":[],msg:[]};if(d.isSpecialPeriod)for(B=0;B<d.currentPeriodArr.length;B++)q=countlyCommon.getDescendantProp(e,d.currentPeriodArr[B]),q=c.clearSessionObject(q),m.total[m.total.length]=q.t,m.nev[m.nev.length]=q.n,m.unique[m.unique.length]=q.u,m.returning[m.returning.length]=q.t-q.n,m["total-time"][m["total-time"].length]=q.d,m["avg-time"][m["avg-time"].length]=0==q.t?
0:q.d/q.t,m.events[m.events.length]=q.e,m["avg-events"][m["avg-events"].length]=0==q.u?0:q.e/q.u,m.msg[m.msg.length]=q.m;else for(var B=d.periodMin;B<d.periodMax+1;B++){var q=countlyCommon.getDescendantProp(e,d.activePeriod+"."+B),q=c.clearSessionObject(q);m.total[m.total.length]=q.t;m.nev[m.nev.length]=q.n;m.unique[m.unique.length]=q.u;m.returning[m.returning.length]=q.t-q.n;m["total-time"][m["total-time"].length]=q.d;m["avg-time"][m["avg-time"].length]=0==q.t?0:q.d/q.t;m.events[m.events.length]=
q.e;m["avg-events"][m["avg-events"].length]=0==q.u?0:q.e/q.u;m.msg[m.msg.length]=q.m}for(var C in m)m[C]=m[C].join(",");C=s.toFixed(1)+" "+jQuery.i18n.map["common.minute.abrv"];142560<=s?C=(s/525600).toFixed(1)+" "+jQuery.i18n.map["common.year.abrv"]:1440<=s?C=(s/1440).toFixed(1)+" "+jQuery.i18n.map["common.day.abrv"]:60<=s&&(C=(s/60).toFixed(1)+" "+jQuery.i18n.map["common.hour.abrv"]);return b={usage:{"total-sessions":{total:b,change:i.percent,trend:i.trend,sparkline:m.total},"paying-users":{total:j,
"prev-total":k,change:F.percent,trend:F.trend,isEstimate:y},"total-users":{total:r,"prev-total":u,change:x.percent,trend:x.trend,sparkline:m.unique,isEstimate:y},"messaging-users":{total:l,"prev-total":p,change:G.percent,trend:G.trend,sparkline:m.msg,isEstimate:y},"new-users":{total:v,change:w.percent,trend:w.trend,sparkline:m.nev},"returning-users":{total:r-v,change:n.percent,trend:n.trend,sparkline:m.returning},"total-duration":{total:C,change:z.percent,trend:z.trend,sparkline:m["total-time"]},
"avg-duration-per-session":{total:a.toFixed(1)+" "+jQuery.i18n.map["common.minute.abrv"],change:A.percent,trend:A.trend,sparkline:m["avg-time"]},events:{total:D,change:t.percent,trend:t.trend,sparkline:m.events},"avg-events":{total:f.toFixed(1),change:E.percent,trend:E.trend,sparkline:m["avg-events"]}}}};c.getDurationData=function(){var a={chartData:{},chartDP:{dp:[],ticks:[]}};a.chartData=countlyCommon.extractRangeData(e,"ds",b,c.explainDurationRange);var d=_.pluck(a.chartData,"ds"),f=_.pluck(a.chartData,
"t"),i=[{data:[]}];i[0].data[0]=[-1,null];i[0].data[d.length+1]=[d.length,null];a.chartDP.ticks.push([-1,""]);a.chartDP.ticks.push([d.length,""]);for(var j=0;j<d.length;j++)i[0].data[j+1]=[j,f[j]],a.chartDP.ticks.push([j,d[j]]);a.chartDP.dp=i;for(j=0;j<a.chartData.length;j++)a.chartData[j].percent="<div class='percent-bar' style='width:"+2*a.chartData[j].percent+"px;'></div>"+a.chartData[j].percent+"%";return a};c.getSessionDP=function(){return countlyCommon.extractChartData(e,c.clearSessionObject,
[{data:[],label:jQuery.i18n.map["common.table.total-sessions"]},{data:[],label:jQuery.i18n.map["common.table.new-sessions"]},{data:[],label:jQuery.i18n.map["common.table.unique-sessions"]}],[{name:"t"},{name:"n"},{name:"u"}])};c.getSessionDPTotal=function(){return countlyCommon.extractChartData(e,c.clearSessionObject,[{data:[],label:jQuery.i18n.map["common.table.total-sessions"],color:"#DDDDDD",mode:"ghost"},{data:[],label:jQuery.i18n.map["common.table.total-sessions"],color:"#333933"}],[{name:"pt",
func:function(b){return b.t},period:"previous"},{name:"t"}])};c.getUserDP=function(){return countlyCommon.extractChartData(e,c.clearSessionObject,[{data:[],label:jQuery.i18n.map["common.table.total-users"]},{data:[],label:jQuery.i18n.map["common.table.new-users"]},{data:[],label:jQuery.i18n.map["common.table.returning-users"]}],[{name:"u"},{name:"n"},{name:"returning",func:function(b){return b.u-b.n}}])};c.getUserDPActive=function(){return countlyCommon.extractChartData(e,c.clearSessionObject,[{data:[],
label:jQuery.i18n.map["common.table.total-users"],color:"#DDDDDD",mode:"ghost"},{data:[],label:jQuery.i18n.map["common.table.total-users"],color:"#333933"}],[{name:"pt",func:function(b){return b.u},period:"previous"},{name:"t",func:function(b){return b.u}}])};c.getUserDPNew=function(){return countlyCommon.extractChartData(e,c.clearSessionObject,[{data:[],label:jQuery.i18n.map["common.table.new-users"],color:"#DDDDDD",mode:"ghost"},{data:[],label:jQuery.i18n.map["common.table.new-users"],color:"#333933"}],
[{name:"pn",func:function(b){return b.n},period:"previous"},{name:"n"}])};c.getMsgUserDPActive=function(){return countlyCommon.extractChartData(e,c.clearSessionObject,[{data:[],label:jQuery.i18n.map["common.table.total-users"],color:countlyCommon.GRAPH_COLORS[0]},{data:[],label:jQuery.i18n.map["common.table.messaging-users"],color:countlyCommon.GRAPH_COLORS[1]}],[{name:"u"},{name:"m"}])};c.getDurationDP=function(){return countlyCommon.extractChartData(e,c.clearSessionObject,[{data:[],label:jQuery.i18n.map["common.graph.time-spent"],
color:"#DDDDDD",mode:"ghost"},{data:[],label:jQuery.i18n.map["common.graph.time-spent"],color:"#333933"}],[{name:"previous_t",func:function(b){return(b.d/60).toFixed(1)},period:"previous"},{name:"t",func:function(b){return(b.d/60).toFixed(1)}}])};c.getDurationDPAvg=function(){return countlyCommon.extractChartData(e,c.clearSessionObject,[{data:[],label:jQuery.i18n.map["common.graph.average-time"],color:"#DDDDDD",mode:"ghost"},{data:[],label:jQuery.i18n.map["common.graph.average-time"],color:"#333933"}],
[{name:"previous_average",func:function(b){return 0==b.t?0:(b.d/b.t/60).toFixed(1)},period:"previous"},{name:"average",func:function(b){return 0==b.t?0:(b.d/b.t/60).toFixed(1)}}])};c.getEventsDP=function(){return countlyCommon.extractChartData(e,c.clearSessionObject,[{data:[],label:jQuery.i18n.map["common.graph.reqs-received"],color:"#DDDDDD",mode:"ghost"},{data:[],label:jQuery.i18n.map["common.graph.reqs-received"],color:"#333933"}],[{name:"pe",func:function(b){return b.e},period:"previous"},{name:"e"}])};
c.getEventsDPAvg=function(){return countlyCommon.extractChartData(e,c.clearSessionObject,[{data:[],label:jQuery.i18n.map["common.graph.avg-reqs-received"],color:"#DDDDDD",mode:"ghost"},{data:[],label:jQuery.i18n.map["common.graph.avg-reqs-received"],color:"#333933"}],[{name:"previous_average",func:function(b){return 0==b.u?0:(b.e/b.u).toFixed(1)},period:"previous"},{name:"average",func:function(b){return 0==b.u?0:(b.e/b.u).toFixed(1)}}])};c.clearSessionObject=function(b){b?(b.t||(b.t=0),b.n||(b.n=
0),b.u||(b.u=0),b.d||(b.d=0),b.e||(b.e=0),b.p||(b.p=0),b.m||(b.m=0)):b={t:0,n:0,u:0,d:0,e:0,p:0,m:0};return b};c.explainDurationRange=function(b){var c=jQuery.i18n.map["common.seconds"],a=jQuery.i18n.map["common.minutes"];return["0-10 "+c,"11-30 "+c,"31-60 "+c,"1-3 "+a,"3-10 "+a,"10-30 "+a,"30-60 "+a,"> 1 "+jQuery.i18n.map["common.hour"]][b]};c.getDurationIndex=function(b){var c=jQuery.i18n.map["common.seconds"],a=jQuery.i18n.map["common.minutes"];return["0-10 "+c,"11-30 "+c,"31-60 "+c,"1-3 "+a,"3-10 "+
a,"10-30 "+a,"30-60 "+a,"> 1 "+jQuery.i18n.map["common.hour"]].indexOf(b)};c.getTopUserBars=function(){var b=[],a=0,d=3,i=0,j=countlyCommon.extractChartData(e,c.clearSessionObject,[{data:[],label:jQuery.i18n.map["common.table.total-users"]}],[{name:"t",func:function(b){return b.u}}]),j=_.sortBy(_.reject(j.chartData,function(b){return 0==b.t}),function(b){return-b.t});3>j.length&&(d=j.length);for(var k=0;k<d;k++)a+=j[k].t;for(k=0;k<d;k++){var l=Math.floor(100*(j[k].t/a)),i=i+l;k==d-1&&(l+=100-i);b[k]=
{name:j[k].date,percent:l}}return b};c.getSessionDb=function(){return e}})(window.countlySession=window.countlySession||{},jQuery);(function(c,a){function d(){var a={cols:[],rows:[]};f=new google.visualization.GeoChart(document.getElementById(j));var e=countlyCommon.extractTwoLevelData(b,h,c.clearLocationObject,[{name:"city",func:function(b){return b}},{name:"t"}]);a.cols=[{id:"city",label:"City",type:"string"},{id:"total",label:jQuery.i18n.map["common.total"],type:"number"}];a.rows=_.map(e.chartData,function(b){return"Unknown"==b.city?{c:[]}:{c:[{v:b.city},{v:b.t}]}});i=new google.visualization.DataTable(a);countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].country&&
(k.region=countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].country);k.resolution="countries";k.displayMode="markers";f.draw(i,k)}function e(){h=b.meta?b.meta.cities?b.meta.cities:[]:[]}var b={},g=0,h=[],f,i,j="geo-chart",k={displayMode:"markers",colorAxis:{minValue:0,colors:["#D7F1D8","#6BB96E"]},resolution:"countries",toolTip:{textStyle:{color:"#FF0000"},showColorCode:!1},legend:"none",backgroundColor:"transparent",datalessRegionColor:"#FFF",region:"TR"},l=!1,p=null;!1===countlyCommon.CITY_DATA?(c.initialize=
function(){return!0},c.refresh=function(){return!0},c.drawGeoChart=function(){return!0},c.refreshGeoChart=function(){return!0},c.getLocationData=function(){return[]}):(c.initialize=function(){if(l&&p==countlyCommon.getPeriodForAjax()&&g==countlyCommon.ACTIVE_APP_KEY)return c.refresh();p=countlyCommon.getPeriodForAjax();if(countlyCommon.DEBUG)return b={2012:{}},!0;g=countlyCommon.ACTIVE_APP_KEY;l=!0;return a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,
app_id:countlyCommon.ACTIVE_APP_ID,method:"cities",period:p},dataType:"jsonp",success:function(c){b=c;e()}})},c.refresh=function(){return countlyCommon.DEBUG?(b={2012:{}},!0):g!=countlyCommon.ACTIVE_APP_KEY?(g=countlyCommon.ACTIVE_APP_KEY,c.initialize()):a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"cities",action:"refresh"},dataType:"jsonp",success:function(c){countlyCommon.extendDbObj(b,c);e()}})},c.reset=
function(){b={};e()},c.drawGeoChart=function(b){b&&(b.chartElementId&&(j=b.chartElementId),b.height&&(k.height=b.height,k.width=556*b.height/347));google.visualization?d():google.load("visualization","1",{packages:["geochart"],callback:d})},c.refreshGeoChart=function(){if(google.visualization){var a={cols:[],rows:[]},e=countlyCommon.extractTwoLevelData(b,h,c.clearLocationObject,[{name:"city",func:function(b){return b}},{name:"t"}]);a.cols=[{id:"city",label:"City",type:"string"},{id:"total",label:jQuery.i18n.map["common.total"],
type:"number"}];a.rows=_.map(e.chartData,function(b){return"Unknown"==b.city?{c:[{v:""},{v:b.t}]}:{c:[{v:b.city},{v:b.t}]}});i=new google.visualization.DataTable(a);f.draw(i,k)}else google.load("visualization","1",{packages:["geochart"],callback:d})},c.getLocationData=function(a){var e=countlyCommon.extractTwoLevelData(b,h,c.clearLocationObject,[{name:"city",func:function(b){return b}},{name:"t"},{name:"u"},{name:"n"}]);a&&(a.maxCountries&&e.chartData)&&e.chartData.length>a.maxCountries&&(e.chartData=
e.chartData.splice(0,a.maxCountries));return e.chartData});c.clearLocationObject=function(b){b?(b.t||(b.t=0),b.n||(b.n=0),b.u||(b.u=0)):b={t:0,n:0,u:0};return b}})(window.countlyCity=window.countlyCity||{},jQuery);(function(c,a){function d(){var e={cols:[],rows:[]};h=new google.visualization.GeoChart(document.getElementById(i));var d=countlyCommon.extractTwoLevelData(b,g,c.clearLocationObject,[{name:"country",func:function(b){return c.getCountryName(b)}},{name:"t"}]);e.cols=[{id:"country",label:jQuery.i18n.map["countries.table.country"],type:"string"},{id:"total",label:jQuery.i18n.map["common.total"],type:"number"}];e.rows=_.map(d.chartData,function(b){return"European Union"==b.country||"Unknown"==b.country?
{c:[{v:""},{v:b.t}]}:{c:[{v:b.country},{v:b.t}]}});f=new google.visualization.DataTable(e);j.region="world";j.resolution="countries";j.displayMode="region";!1!==countlyCommon.CITY_DATA&&300<j.height&&google.visualization.events.addListener(h,"regionClick",function(b){var c=countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].country;c&&b.region==c&&(j.region=b.region,j.resolution="countries",h.draw(f,j),a(document).trigger("selectMapCountry"))});h.draw(f,j)}function e(){g=b.meta?b.meta.countries?b.meta.countries:
[]:[]}var b={},g=[],h,f,i="geo-chart",j={displayMode:"region",colorAxis:{minValue:0,colors:["#D7F1D8","#6BB96E"]},resolution:"countries",toolTip:{textStyle:{color:"#FF0000"},showColorCode:!1},legend:"none",backgroundColor:"transparent",datalessRegionColor:"#FFF"},k={};a.get("localization/countries/"+countlyCommon.BROWSER_LANG_SHORT+"/country.json",function(b){k=b});c.initialize=function(){b=countlyUser.getDbObj();e()};c.refresh=function(c){countlyCommon.extendDbObj(b,c);b.meta&&(g=countlyCommon.union(g,
b.meta.countries))};c.reset=function(){b={};e()};c.drawGeoChart=function(b){b&&(b.chartElementId&&(i=b.chartElementId),b.height&&(j.height=b.height,j.width=556*b.height/347));google.visualization?d():google.load("visualization","1",{packages:["geochart"],callback:d})};c.refreshGeoChart=function(){if(google.visualization){var a={cols:[],rows:[]},e=countlyCommon.extractTwoLevelData(b,g,c.clearLocationObject,[{name:"country",func:function(b){return c.getCountryName(b)}},{name:"t"}]);a.cols=[{id:"country",
label:jQuery.i18n.map["countries.table.country"],type:"string"},{id:"total",label:jQuery.i18n.map["common.total"],type:"number"}];a.rows=_.map(e.chartData,function(b){return"European Union"==b.country||"Unknown"==b.country?{c:[{v:""},{v:b.t}]}:{c:[{v:b.country},{v:b.t}]}});f=new google.visualization.DataTable(a);h.draw(f,j)}else google.load("visualization","1",{packages:["geochart"],callback:d})};c.getLocationData=function(a){var e=countlyCommon.extractTwoLevelData(b,g,c.clearLocationObject,[{name:"country",
func:function(b){return c.getCountryName(b)}},{name:"code",func:function(b){return b.toLowerCase()}},{name:"t"},{name:"u"},{name:"n"}]);e.chartData=_.sortBy(e.chartData,function(b){return-b.t});a&&(a.maxCountries&&e.chartData)&&e.chartData.length>a.maxCountries&&(e.chartData=e.chartData.splice(0,a.maxCountries));for(a=0;a<e.chartData.length;a++)e.chartData[a].country_flag="<div class='flag' style='background-image:url("+countlyGlobal.path+"/images/flags/"+e.chartData[a].code+".png);'></div>"+e.chartData[a].country;
return e.chartData};c.clearLocationObject=function(b){b?(b.t||(b.t=0),b.n||(b.n=0),b.u||(b.u=0)):b={t:0,n:0,u:0};return b};c.getCountryName=function(b){return(b=k[b.toUpperCase()])?b:"Unknown"};c.changeLanguage=function(){return a.get("localization/countries/"+countlyCommon.BROWSER_LANG_SHORT+"/country.json",function(b){k=b})}})(window.countlyLocation=window.countlyLocation||{},jQuery);(function(c,a){function d(){b.meta?(g=b.meta["l-ranges"]?b.meta["l-ranges"]:[],h=b.meta["f-ranges"]?b.meta["f-ranges"]:[]):(g=[],h=[])}var e={},b={},g=[],h=[],f=0,i=!1,j=null;c.initialize=function(){if(i&&j==countlyCommon.getPeriodForAjax()&&f==countlyCommon.ACTIVE_APP_KEY)return c.refresh();j=countlyCommon.getPeriodForAjax();if(countlyCommon.DEBUG)return!0;f=countlyCommon.ACTIVE_APP_KEY;i=!0;return a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,
method:"users",period:j},dataType:"jsonp",success:function(c){b=c;d();countlySession.initialize();countlyLocation.initialize()}})};c.refresh=function(){return countlyCommon.DEBUG?!0:f!=countlyCommon.ACTIVE_APP_KEY?(f=countlyCommon.ACTIVE_APP_KEY,c.initialize()):a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"users",action:"refresh"},dataType:"jsonp",success:function(c){countlyCommon.extendDbObj(b,c);b.meta&&
(g=countlyCommon.union(g,b.meta["l-ranges"]),h=countlyCommon.union(h,b.meta["f-ranges"]));countlySession.refresh(c);countlyLocation.refresh(c)}})};c.reset=function(){b={};d()};c.getFrequencyData=function(){var a={chartData:{},chartDP:{dp:[],ticks:[]}};a.chartData=countlyCommon.extractRangeData(b,"f",h,c.explainFrequencyRange);var e=_.pluck(a.chartData,"f"),d=_.pluck(a.chartData,"t"),g=[{data:[]}];g[0].data[0]=[-1,null];g[0].data[e.length+1]=[e.length,null];a.chartDP.ticks.push([-1,""]);a.chartDP.ticks.push([e.length,
""]);for(var i=0;i<e.length;i++)g[0].data[i+1]=[i,d[i]],a.chartDP.ticks.push([i,e[i]]);a.chartDP.dp=g;for(i=0;i<a.chartData.length;i++)a.chartData[i].percent="<div class='percent-bar' style='width:"+2*a.chartData[i].percent+"px;'></div>"+a.chartData[i].percent+"%";return a};c.getLoyaltyData=function(){var a={chartData:{},chartDP:{dp:[],ticks:[]}};a.chartData=countlyCommon.extractRangeData(b,"l",g,c.explainLoyaltyRange);var e=_.pluck(a.chartData,"l"),d=_.pluck(a.chartData,"t"),i=[{data:[]}];i[0].data[0]=
[-1,null];i[0].data[e.length+1]=[e.length,null];a.chartDP.ticks.push([-1,""]);a.chartDP.ticks.push([e.length,""]);for(var f=0;f<e.length;f++)i[0].data[f+1]=[f,d[f]],a.chartDP.ticks.push([f,e[f]]);a.chartDP.dp=i;for(f=0;f<a.chartData.length;f++)a.chartData[f].percent="<div class='percent-bar' style='width:"+2*a.chartData[f].percent+"px;'></div>"+a.chartData[f].percent+"%";return a};c.getLoyaltyDP=function(){e=countlyCommon.periodObj;for(var a=[{data:[],label:jQuery.i18n.map["user-loyalty.loyalty"]}],
c=[],d,i=0;i<g.length;i++){d=0;if(e.isSpecialPeriod)for(f=0;f<e.currentPeriodArr.length;f++)h=countlyCommon.getDescendantProp(b,e.currentPeriodArr[f]+".l"),h=clearLoyaltyObject(h),d+=h[g[i]];else for(var f=e.periodMin;f<e.periodMax+1;f++){var h=countlyCommon.getDescendantProp(b,e.activePeriod+"."+f+".l"),h=clearLoyaltyObject(h);d+=h[g[i]]}0!=d&&(a[0].data[a[0].data.length]=[i,d],c[i]=[i,g[i]])}return{dp:a,ticks:c}};c.explainFrequencyRange=function(b){var a=jQuery.i18n.map["user-loyalty.range.days"];
return[jQuery.i18n.map["user-loyalty.range.first-session"],"1-24 "+jQuery.i18n.map["user-loyalty.range.hours"],"1 "+jQuery.i18n.map["user-loyalty.range.day"],"2 "+a,"3 "+a,"4 "+a,"5 "+a,"6 "+a,"7 "+a,"8-14 "+a,"15-30 "+a,"30+ "+a][b]};c.getFrequencyIndex=function(b){var a=jQuery.i18n.map["user-loyalty.range.days"];return[jQuery.i18n.map["user-loyalty.range.first-session"],"1-24 "+jQuery.i18n.map["user-loyalty.range.hours"],"1 "+jQuery.i18n.map["user-loyalty.range.day"],"2 "+a,"3 "+a,"4 "+a,"5 "+a,
"6 "+a,"7 "+a,"8-14 "+a,"15-30 "+a,"30+ "+a].indexOf(b)};c.explainLoyaltyRange=function(b){return"1;2;3-5;6-9;10-19;20-49;50-99;100-499;> 500".split(";")[b]};c.getLoyaltyIndex=function(b){return"1;2;3-5;6-9;10-19;20-49;50-99;100-499;> 500".split(";").indexOf(b)};c.isInitialized=function(){return i};c.getDbObj=function(){return b}})(window.countlyUser=window.countlyUser||{},jQuery);countlyDeviceList={"iPhone1,1":"iPhone 1G","iPhone1,2":"iPhone 3G","iPhone2,1":"iPhone 3GS","iPhone3,1":"iPhone 4 (GSM)","iPhone3,2":"iPhone 4 (GSM Rev A)","iPhone3,3":"iPhone 4 (CDMA)","iPhone4,1":"iPhone 4S","iPhone5,1":"iPhone 5 (GSM)","iPhone5,2":"iPhone 5 (Global)","iPhone5,3":"iPhone 5C (GSM)","iPhone5,4":"iPhone 5C (Global)","iPhone6,1":"iPhone 5S (GSM)","iPhone6,2":"iPhone 5S (Global)","iPhone7,1":"iPhone 6 Plus","iPhone7,2":"iPhone 6","iPod1,1":"iPod Touch 1G","iPod2,1":"iPod Touch 2G","iPod3,1":"iPod Touch 3G",
"iPod4,1":"iPod Touch 4G","iPod5,1":"iPod Touch 5G","iPad1,1":"iPad","iPad2,1":"iPad 2 (WiFi)","iPad2,2":"iPad 2 (GSM)","iPad2,3":"iPad 2 (CDMA)","iPad2,4":"iPad 2 (WiFi Rev A)","iPad3,1":"iPad 3 (WiFi)","iPad3,2":"iPad 3 (CDMA)","iPad3,3":"iPad 3 (Global)","iPad3,4":"iPad 4 (WiFi)","iPad3,5":"iPad 4 (GSM)","iPad3,6":"iPad 4 (Global)","iPad4,1":"iPad Air (WiFi)","iPad4,2":"iPad Air (Global)","iPad4,3":"iPad Air (Global)","iPad5,3":"iPad Air 2G (WiFi)","iPad5,4":"iPad Air 2G (Global)","iPad2,5":"iPad Mini (WiFi)",
"iPad2,6":"iPad Mini (GSM)","iPad2,7":"iPad Mini (Global)","iPad4,4":"iPad Mini 2G (WiFi)","iPad4,5":"iPad Mini 2G (Global)","iPad4,6":"iPad Mini 2G (Global)","iPad4,7":"iPad Mini 3G (WiFi)","iPad4,8":"iPad Mini 3G (Global)","iPad4,9":"iPad Mini 3G (Global)",i386:"Simulator",x86_64:"Simulator"};(function(c,a){function d(){g=b.meta?b.meta.devices?b.meta.devices:[]:[]}var e={},b={},g=[],h=0,f=!1,i=null;c.initialize=function(){if(f&&i==countlyCommon.getPeriodForAjax()&&h==countlyCommon.ACTIVE_APP_KEY)return c.refresh();i=countlyCommon.getPeriodForAjax();if(countlyCommon.DEBUG)return b={2012:{}},!0;h=countlyCommon.ACTIVE_APP_KEY;f=!0;return a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"devices",period:i},
dataType:"jsonp",success:function(a){b=a;d()}})};c.refresh=function(){e=countlyCommon.periodObj;return countlyCommon.DEBUG?(b={2012:{}},!0):h!=countlyCommon.ACTIVE_APP_KEY?(h=countlyCommon.ACTIVE_APP_KEY,c.initialize()):a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"devices",action:"refresh"},dataType:"jsonp",success:function(a){countlyCommon.extendDbObj(b,a);b.meta&&(g=countlyCommon.union(g,b.meta.devices))}})};
c.reset=function(){b={};d()};c.getDeviceData=function(){var a=countlyCommon.extractTwoLevelData(b,g,c.clearDeviceObject,[{name:"device",func:function(b){return c.getDeviceFullName(b)}},{name:"t"},{name:"u"},{name:"n"}]),e=_.pluck(a.chartData,"device"),d=_.pluck(a.chartData,"u"),i=_.pluck(a.chartData,"n"),f=[],h=[];_.reduce(d,function(b,a){return b+a},0);for(var r=0;r<e.length;r++)f[r]={data:[[0,d[r]]],label:e[r]};_.reduce(i,function(b,a){return b+a},0);for(r=0;r<e.length;r++)h[r]={data:[[0,i[r]]],
label:e[r]};a.chartDPTotal={};a.chartDPTotal.dp=f;a.chartDPNew={};a.chartDPNew.dp=h;return a};c.getDeviceDP=function(){e=countlyCommon.periodObj;for(var a=[{data:[],label:"Devices"}],d=[],i,f=0;f<g.length;f++){i=0;if(e.isSpecialPeriod)for(h=0;h<e.currentPeriodArr.length;h++)n=countlyCommon.getDescendantProp(b,e.currentPeriodArr[h]+".device"),n=clearLoyaltyObject(n),i+=n[b.devices[f]];else for(var h=e.periodMin;h<e.periodMax+1;h++){var n=countlyCommon.getDescendantProp(b,e.activePeriod+"."+h+".device"),
n=clearLoyaltyObject(n);i+=n[b.devices[f]]}0!=i&&(a[0].data[a[0].data.length]=[f,i],d[f]=[f,c.getDeviceFullName(b.devices[f])])}return{dp:a,ticks:d}};c.clearDeviceObject=function(b){b?(b.t||(b.t=0),b.n||(b.n=0),b.u||(b.u=0)):b={t:0,n:0,u:0};return b};c.getDeviceFullName=function(b){return countlyDeviceList&&countlyDeviceList[b]?countlyDeviceList[b]:b}})(window.countlyDevice=window.countlyDevice||{},jQuery);(function(c,a){function d(){e.meta?(b=e.meta.os?e.meta.os:[],g=e.meta.resolutions?e.meta.resolutions:[],h=e.meta.os_versions?e.meta.os_versions:[]):(b=[],g=[],h=[]);h.length&&(h=h.join(",").replace(/\./g,":").split(","))}var e={},b=[],g=[],h=[],f=0,i=!1,j=null;c.initialize=function(){if(i&&j==countlyCommon.getPeriodForAjax()&&f==countlyCommon.ACTIVE_APP_KEY)return c.refresh();j=countlyCommon.getPeriodForAjax();if(countlyCommon.DEBUG)return e={2012:{}},!0;f=countlyCommon.ACTIVE_APP_KEY;i=!0;return a.ajax({type:"GET",
url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"device_details",period:j},dataType:"jsonp",success:function(b){e=b;d();countlyAppVersion.initialize()}})};c.refresh=function(){return countlyCommon.DEBUG?(e={2012:{}},!0):f!=countlyCommon.ACTIVE_APP_KEY?(f=countlyCommon.ACTIVE_APP_KEY,c.initialize()):a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,
method:"device_details",action:"refresh"},dataType:"jsonp",success:function(a){countlyCommon.extendDbObj(e,a);e.meta&&(b=countlyCommon.union(b,e.meta.os),g=countlyCommon.union(g,e.meta.resolutions),h=countlyCommon.union(h,e.meta.os_versions));h.length&&(h=h.join(",").replace(/\./g,":").split(","));countlyAppVersion.refresh(a)}})};c.reset=function(){e={};d()};c.clearDeviceDetailsObject=function(b){b?(b.t||(b.t=0),b.n||(b.n=0),b.u||(b.u=0)):b={t:0,n:0,u:0};return b};c.getPlatforms=function(){return b};
c.getPlatformBars=function(){return countlyCommon.extractBarData(e,b,c.clearDeviceDetailsObject)};c.getPlatformData=function(){var a=countlyCommon.extractTwoLevelData(e,b,c.clearDeviceDetailsObject,[{name:"os_",func:function(b){return b}},{name:"t"},{name:"u"},{name:"n"}]),d=_.pluck(a.chartData,"os_"),g=_.pluck(a.chartData,"u"),i=[];_.reduce(g,function(b,a){return b+a},0);for(var f=0;f<d.length;f++)i[f]={data:[[0,g[f]]],label:d[f]};a.chartDP={};a.chartDP.dp=i;return a};c.getResolutionBars=function(){return countlyCommon.extractBarData(e,
g,c.clearDeviceDetailsObject)};c.getResolutionData=function(){var b=countlyCommon.extractTwoLevelData(e,g,c.clearDeviceDetailsObject,[{name:"resolution",func:function(b){return b}},{name:"width",func:function(b){return"<a>"+b.split("x")[0]+"</a>"}},{name:"height",func:function(b){return"<a>"+b.split("x")[1]+"</a>"}},{name:"t"},{name:"u"},{name:"n"}]),a=_.pluck(b.chartData,"resolution"),d=_.pluck(b.chartData,"u"),i=_.pluck(b.chartData,"n"),f=[],h=[];_.reduce(d,function(b,a){return b+a},0);for(var j=
0;j<a.length;j++)f[j]={data:[[0,d[j]]],label:a[j]};_.reduce(i,function(b,a){return b+a},0);for(j=0;j<a.length;j++)h[j]={data:[[0,i[j]]],label:a[j]};b.chartDPTotal={};b.chartDPTotal.dp=f;b.chartDPNew={};b.chartDPNew.dp=h;return b};c.getOSVersionBars=function(){for(var b=countlyCommon.extractBarData(e,h,c.clearDeviceDetailsObject),a=0;a<b.length;a++)b[a].name=c.fixOSVersion(b[a].name);return b};c.getOSVersionData=function(a){var d=countlyCommon.extractTwoLevelData(e,h,c.clearDeviceDetailsObject,[{name:"os_version",
func:function(b){return b}},{name:"t"},{name:"u"},{name:"n"}]),a=a?a:b?b[0]:null,g=_.pluck(d.chartData,"u"),i=[];if(d.chartData)for(var f=0;f<d.chartData.length;f++)d.chartData[f].os_version=c.fixOSVersion(d.chartData[f].os_version),-1==d.chartData[f].os_version.indexOf(a)&&delete d.chartData[f];d.chartData=_.compact(d.chartData);var j=_.pluck(d.chartData,"os_version");_.reduce(g,function(b,a){return b+a},0);for(f=0;f<j.length;f++)i[i.length]={data:[[0,g[f]]],label:j[f].replace(a+" ","")};d.chartDP=
{};d.chartDP.dp=i;d.os=[];if(b&&1<b.length)for(f=0;f<b.length;f++)d.os.push({name:b[f],"class":b[f].toLowerCase()});return d};c.fixOSVersion=function(b){return b.replace(/:/g,".").replace(/^i/g,"iOS ").replace(/^a/g,"Android ").replace(/^b/g,"BlackBerry ").replace(/^w/g,"Windows Phone ").replace(/^o/g,"OS X ").replace(/^m/g,"Mac ").replace(/^t/g,"Tizen ")};c.getDbObj=function(){return e}})(window.countlyDeviceDetails=window.countlyDeviceDetails||{},jQuery);(function(c){function a(){e=d.meta?d.meta.app_versions?d.meta.app_versions:[]:[]}var d={},e=[];c.initialize=function(){d=countlyDeviceDetails.getDbObj();a()};c.refresh=function(b){countlyCommon.extendDbObj(d,b);d.meta&&(e=countlyCommon.union(e,d.meta.app_versions))};c.reset=function(){d={};a()};c.clearAppVersionsObject=function(b){b?(b.t||(b.t=0),b.n||(b.n=0),b.u||(b.u=0)):b={t:0,n:0,u:0};return b};c.getAppVersionBars=function(){return countlyCommon.extractBarData(d,e,c.clearAppVersionsObject)};c.getAppVersionData=
function(){var b={chartData:{},chartDP:{dp:[],ticks:[]}},a=countlyCommon.extractTwoLevelData(d,e,c.clearAppVersionsObject,[{name:"app_version",func:function(b){return b}},{name:"t"},{name:"u"},{name:"n"}]);b.chartData=a.chartData;if(b.chartData)for(a=0;a<b.chartData.length;a++)b.chartData[a].app_version=b.chartData[a].app_version.replace(/:/g,".");var h=_.pluck(b.chartData,"app_version"),f=_.pluck(b.chartData,"t"),i=_.pluck(b.chartData,"n"),j=[{data:[],label:jQuery.i18n.map["common.table.total-sessions"]},
{data:[],label:jQuery.i18n.map["common.table.new-users"]}];j[0].data[0]=[-1,null];j[0].data[h.length+1]=[h.length,null];b.chartDP.ticks.push([-1,""]);b.chartDP.ticks.push([h.length,""]);for(a=0;a<h.length;a++)j[0].data[a+1]=[a,f[a]],j[1].data[a+1]=[a,i[a]],b.chartDP.ticks.push([a,h[a]]);b.chartDP.dp=j;return b}})(window.countlyAppVersion=window.countlyAppVersion||{},jQuery);(function(c,a){function d(){b=e.meta?e.meta.carriers?e.meta.carriers:[]:[]}var e={},b=[],g=0,h=!1,f=null;c.initialize=function(){if(h&&f==countlyCommon.getPeriodForAjax()&&g==countlyCommon.ACTIVE_APP_KEY)return c.refresh();f=countlyCommon.getPeriodForAjax();if(countlyCommon.DEBUG)return e={2012:{}},!0;g=countlyCommon.ACTIVE_APP_KEY;h=!0;return a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"carriers",period:f},
dataType:"jsonp",success:function(b){e=b;d()}})};c.refresh=function(){return countlyCommon.DEBUG?(e={2012:{}},!0):g!=countlyCommon.ACTIVE_APP_KEY?(g=countlyCommon.ACTIVE_APP_KEY,c.initialize()):a.ajax({type:"GET",url:countlyCommon.API_PARTS.data.r,data:{api_key:countlyGlobal.member.api_key,app_id:countlyCommon.ACTIVE_APP_ID,method:"carriers",action:"refresh"},dataType:"jsonp",success:function(a){countlyCommon.extendDbObj(e,a);e.meta&&(b=countlyCommon.union(b,e.meta.carriers))}})};c.reset=function(){e=
{};d()};c.getCarrierData=function(){var a=countlyCommon.extractTwoLevelData(e,b,c.clearCarrierObject,[{name:"carrier",func:function(b){return b}},{name:"t"},{name:"u"},{name:"n"}]),d=_.pluck(a.chartData,"carrier"),g=_.pluck(a.chartData,"t"),f=_.pluck(a.chartData,"n"),h=[],v=[];_.reduce(g,function(b,a){return b+a},0);for(var n=0;n<d.length;n++)h[n]={data:[[0,g[n]]],label:d[n]};_.reduce(f,function(b,a){return b+a},0);for(n=0;n<d.length;n++)v[n]={data:[[0,f[n]]],label:d[n]};a.chartDPTotal={};a.chartDPTotal.dp=
h;a.chartDPNew={};a.chartDPNew.dp=v;return a};c.clearCarrierObject=function(b){b?(b.t||(b.t=0),b.n||(b.n=0),b.u||(b.u=0)):b={t:0,n:0,u:0};return b};c.getCarrierBars=function(){return countlyCommon.extractBarData(e,b,c.clearCarrierObject)}})(window.countlyCarrier=window.countlyCarrier||{},jQuery);(function(c,a){var d={all:{_id:"all",name:"All apps"}},e={},b={},g={},h;c.initialize=function(){return c.refresh()};c.refresh=function(){if(countlyCommon.DEBUG)return!0;this.reset();var c=[];h=countlyCommon.ACTIVE_APP_ID;for(var e in countlyGlobal.apps)c.push(f(e));return a.when.apply(a,c).then(function(){countlyCommon.setActiveApp(h);d.all.sessions={total:0,trend:0};d.all.users={total:0,trend:0};d.all.newusers={total:0,trend:0};d.all.duration={total:0,trend:0};d.all.avgduration={total:0,trend:0};
b.all={};for(var a in countlyGlobal.apps){var c=g[a],e;for(e in b[a])for(var f=0,j=b[a][e].data.length;f<j;f++)b.all[e]||(b.all[e]={},b.all[e].label=b[a][e].label,b.all[e].data=[]),b.all[e].data[f]||(b.all[e].data[f]=[0,0]),b.all[e].data[f][0]=b[a][e].data[f][0],b.all[e].data[f][1]+=parseFloat(b[a][e].data[f][1]),"#draw-total-time-spent"==e&&(d.all.duration.total+=parseFloat(b[a][e].data[f][1]));d.all.sessions.total+=c.usage["total-sessions"].total;d.all.users.total+=c.usage["total-users"].total;
d.all.newusers.total+=c.usage["new-users"].total;d.all.sessions.trend+=i(c.usage["total-sessions"].change);d.all.users.trend+=i(c.usage["total-users"].change);d.all.newusers.trend+=i(c.usage["new-users"].change);d.all.duration.trend+=i(c.usage["total-duration"].change);d.all.avgduration.trend+=i(c.usage["avg-duration-per-session"].change)}for(e in d.all)d.all[e].trend=0>d.all[e].trend?"d":"u";d.all.avgduration.total=0==d.all.sessions.total?0:d.all.duration.total/d.all.sessions.total;a=d.all.duration.total.toFixed(1)+
" "+jQuery.i18n.map["common.minute.abrv"];142560<=d.all.duration.total?a=(d.all.duration.total/525600).toFixed(1)+" "+jQuery.i18n.map["common.year.abrv"]:1440<=d.all.duration.total?a=(d.all.duration.total/1440).toFixed(1)+" "+jQuery.i18n.map["common.day.abrv"]:60<=d.all.duration.total&&(a=(d.all.duration.total/60).toFixed(1)+" "+jQuery.i18n.map["common.hour.abrv"]);d.all.duration.total=a;a=d.all.avgduration.total.toFixed(1)+" "+jQuery.i18n.map["common.minute.abrv"];142560<=d.all.avgduration.total?
a=(d.all.avgduration.total/525600).toFixed(1)+" "+jQuery.i18n.map["common.year.abrv"]:1440<=d.all.avgduration.total?a=(d.all.avgduration.total/1440).toFixed(1)+" "+jQuery.i18n.map["common.day.abrv"]:60<=d.all.avgduration.total&&(a=(d.all.avgduration.total/60).toFixed(1)+" "+jQuery.i18n.map["common.hour.abrv"]);d.all.avgduration.total=a})};c.reset=function(){e={}};c.getData=function(){var b=[],a;for(a in d)b.push(d[a]);return b};c.getSessionData=function(){return b};c.setApp=function(b){h=b;countlyCommon.setActiveApp(h)};
var f=function(c){countlyCommon.setActiveApp(c);return a.when(countlyUser.initialize()).done(function(){var a=countlySession.getSessionData();e[c]||(g[c]=a,b[c]={"#draw-total-users":countlySession.getUserDPActive().chartDP[1],"#draw-new-users":countlySession.getUserDPNew().chartDP[1],"#draw-total-sessions":countlySession.getSessionDPTotal().chartDP[1],"#draw-time-spent":countlySession.getDurationDPAvg().chartDP[1],"#draw-total-time-spent":countlySession.getDurationDP().chartDP[1],"#draw-avg-events-served":countlySession.getEventsDPAvg().chartDP[1]},
d[c]={_id:c,name:countlyGlobal.apps[c].name,sessions:a.usage["total-sessions"],users:a.usage["total-users"],newusers:a.usage["new-users"],duration:a.usage["total-duration"],avgduration:a.usage["avg-duration-per-session"]},e[c]=!0)})},i=function(b){if("NA"==b||"\u221e"==b)return 0;var b=b.slice(0,-1),a=1;"K"==b.slice(-1)?(b=b.slice(0,-1),a=1E3):"M"==b.slice(-1)&&(b=b.slice(0,-1),a=1E6);return parseFloat(b)*a}})(window.countlyAllApps=window.countlyAllApps||{},jQuery);var countlyView=Backbone.View.extend({template:null,templateData:{},el:$("#content"),initialize:function(){this.template=Handlebars.compile($("#template-analytics-common").html())},dateChanged:function(){"/"==Backbone.history.fragment?this.refresh(!0):this.refresh()},appChanged:function(){countlyEvent.reset();var c=this;$.when(countlyEvent.initialize()).then(function(){c.render()})},beforeRender:function(){return!0},afterRender:function(){},render:function(){$("#content-top").html("");this.el.html('<div id="content-loader"></div>');
if(countlyCommon.ACTIVE_APP_ID){var c=this;$.when(this.beforeRender(),initializeOnce()).then(function(){c.renderCommon();c.afterRender();app.pageScript()})}else this.renderCommon(),this.afterRender(),app.pageScript();return this},renderCommon:function(){},refresh:function(){return!0},restart:function(){this.refresh()},destroy:function(){}}),initializeOnce=_.once(function(){return $.when(countlyEvent.initialize()).then(function(){})}),Template=function(){this.cached={}},T=new Template;
$.extend(Template.prototype,{render:function(c,a){T.isCached(c)?a(T.cached[c]):$.get(T.urlFor(c),function(d){T.store(c,d);T.render(c,a)})},renderSync:function(c,a){T.isCached(c)||T.fetch(c);T.render(c,a)},prefetch:function(c){$.get(T.urlFor(c),function(a){T.store(c,a)})},fetch:function(c){if(!T.isCached(c)){var a=$.ajax({url:T.urlFor(c),async:!1}).responseText;T.store(c,a)}},isCached:function(c){return!!T.cached[c]},store:function(c,a){T.cached[c]=Handlebars.compile(a)},urlFor:function(c){return c+
".html"}});
(function(c,a){function d(c){a("body").append(c);var b=c.outerHeight()-2,d=c.outerWidth();c.css({height:b,"margin-top":Math.floor(-b/2),width:d,"margin-left":Math.floor(-d/2)});a("#overlay").fadeIn();c.fadeIn()}c.parseAndShowMsg=function(c){if(!c||!c.length)return!0;_.isArray(c)&&(c=c[0]);var b="info",d="",d=c.split("|");1<d.length?(b=d[0],d=d[1]):d=c;a.amaran({content:{title:b,message:d,icon:"fa fa-info"},theme:"awesome ok"});delete countlyGlobal.message};c.notify=function(c){a.amaran({content:{title:c.title||"Notification",
message:c.message||"",info:c.info||"",icon:c.icon||"fa fa-info"},theme:"awesome "+(c.type||"ok"),position:"top right",sticky:!0,closeButton:!0})};c.popup=function(c,b,g){var h=a("#cly-popup").clone();h.removeAttr("id");b&&h.addClass(b);g?h.find(".content").html(c):h.find(".content").html(a(c).html());d(h)};c.openResource=function(c){var b=a("#cly-resource").clone();b.removeAttr("id");b.find(".content").html("<iframe style='border-radius:5px; border:none; width:800px; height:600px;' src='"+c+"'></iframe>");
d(b)};c.alert=function(c,b){var g=a("#cly-alert").clone();g.removeAttr("id");g.find(".message").html(c);g.addClass(b);d(g)};c.confirm=function(c,b,g,h){var f=a("#cly-confirm").clone();f.removeAttr("id");f.find(".message").html(c);h&&2==h.length&&(f.find("#dialog-cancel").text(h[0]),f.find("#dialog-continue").text(h[1]));f.addClass(b);d(f);f.find("#dialog-cancel").on("click",function(){g(!1)});f.find("#dialog-continue").on("click",function(){g(!0)})};c.loading=function(c){var b=a("#cly-loading").clone();
b.removeAttr("id");b.find(".message").html(c);b.addClass("cly-loading");d(b);return b};c.setUpDateSelectors=function(c){a("#month").text(moment().year());a("#day").text(moment().format("MMM"));a("#yesterday").text(moment().subtract("days",1).format("Do"));a("#date-selector").find(">.button").click(function(){if(a(this).hasClass("selected"))return!0;c.dateFromSelected=null;c.dateToSelected=null;a(".date-selector").removeClass("selected").removeClass("active");a(this).addClass("selected");var b=a(this).attr("id");
if(countlyCommon.getPeriod()==b)return!0;countlyCommon.setPeriod(b);c.dateChanged(b);a("#"+b).addClass("active")});a("#date-selector").find(">.button").each(function(){countlyCommon.getPeriod()==a(this).attr("id")&&a(this).addClass("active").addClass("selected")})};c.initializeSelect=function(c){c=c||a("#content-container");c.off("click",".cly-select").on("click",".cly-select",function(b){if(a(this).hasClass("disabled"))return!0;a(this).removeClass("req");var c=a(this).find(".select-items"),e=c.find(".item").length;
if(!c.length)return!1;a(".cly-select").find(".search").remove();c.is(":visible")?a(this).removeClass("active"):(a(".cly-select").removeClass("active"),a(".select-items").hide(),a(this).addClass("active"),10<e&&!a(this).hasClass("centered")&&a("<div class='search'><div class='inner'><input type='text' /><i class= fa fa-search'></i></div></div>").insertBefore(a(this).find(".select-items")));a(this).hasClass("centered")&&(c=a(this).find(".select-items").height(),a(this).find(".select-items").css("margin-top",
-(c/2).toFixed(0)-(a(this).height()/2).toFixed(0)+"px"));a(this).find(".select-items").is(":visible")?a(this).find(".select-items").hide():(a(this).find(".select-items").show(),a(this).find(".select-items>div").addClass("scroll-list"),a(this).find(".scroll-list").slimScroll({height:"100%",start:"top",wheelStep:10,position:"right",disableFadeOut:!0}));a(this).find(".search input").focus();a("#date-picker").hide();b.stopPropagation()});c.off("click",".select-items .item").on("click",".select-items .item",
function(){var b=a(this).parents(".cly-select").find(".text");b.text(a(this).text());b.data("value",a(this).data("value"))});c.off("click",".cly-select .search").on("click",".cly-select .search",function(b){b.stopPropagation()});c.off("keyup",".cly-select .search input").on("keyup",".cly-select .search input",function(){a(this).val()?(a(this).parents(".cly-select").find(".item:not(:contains('"+a(this).val()+"'))").addClass("hidden"),a(this).parents(".cly-select").find(".item:contains('"+a(this).val()+
"')").removeClass("hidden")):a(this).parents(".cly-select").find(".item").removeClass("hidden")});c.off("mouseenter").on("mouseenter",".cly-select .item",function(){var b=a(this);this.offsetWidth<this.scrollWidth&&!b.attr("title")&&b.attr("title",b.text())});a(window).click(function(){a(".select-items").hide();a(".cly-select").find(".search").remove()})};c.refreshTable=function(a,b){var c=a.fnSettings();a.fnClearTable(!1);for(var d=0;d<b.length;d++)a.oApi._fnAddData(c,b[d]);c.aiDisplay=c.aiDisplayMaster.slice();
a.fnStandingRedraw()};c.expandRows=function(c,b){c.aOpen=[];c.on("click","tr",function(d){var h=this,f=a(h).attr("id");if(f){var i=a.inArray(f,c.aOpen);-1===i?(a(h).addClass("selected"),d=c.fnOpen(h,b(c.fnGetData(h)),"details"),a("div.datatablesubrow",d).slideDown(),c.aOpen.push(f)):(a(h).removeClass("selected"),a("div.datatablesubrow",a(h).next()[0]).slideUp(function(){c.fnClose(h);c.aOpen.splice(i,1)}))}else d.stopPropagation()})};c.reopenRows=function(c,b){c.fnSettings();c.aOpen&&a.each(c.aOpen,
function(d,h){var f=a("#"+h)[0];a(f).addClass("selected");f=c.fnOpen(f,b(c.fnGetData(f)),"details");a("div.datatablesubrow",f).show()})};c.appIdsToNames=function(a){for(var b="",c=0;c<a.length;c++)a[c]&&(b=countlyGlobal.apps[a[c]]?b+countlyGlobal.apps[a[c]].name:b+"deleted app",1<a.length&&c!=a.length-1&&(b+=", "));return b};c.messageText=function(a){if(a){if(a["default"])return a["default"];if(a.en)return a.en;for(var b in a)return a[b]}return""};c.clip=function(a){return function(b){b=a(b);return'<div class="clip'+
(b?"":" nothing")+'">'+(b||jQuery.i18n.map["push.no-message"])+"</div>"}};c.initializeTextSelect=function(){function c(b,a){b.removeClass("req");if(!b.find(".select-items").length)return!1;b.find(".select-items").is(":visible")&&!a?b.find(".select-items").hide():(b.find(".select-items").show(),b.find(".select-items>div").addClass("scroll-list"),b.find(".scroll-list").slimScroll({height:"100%",start:"top",wheelStep:10,position:"right",disableFadeOut:!0}))}a("#content-container").on("click",".cly-text-select",
function(b){if(a(this).hasClass("disabled"))return!0;c(a(this));a("#date-picker").hide();b.stopPropagation()});a("#content-container").on("click",".select-items .item",function(){var b=a(this).parents(".cly-text-select").find(".text");b.text(a(this).text());b.data("value",a(this).data("value"));b.val(a(this).text())});a("#content-container").on("keyup",".cly-text-select input",function(){c(a(this).parents(".cly-text-select"),!0);a(this).data("value",a(this).val());a(this).val()?(a(this).parents(".cly-text-select").find(".item:not(:contains('"+
a(this).val()+"'))").addClass("hidden"),a(this).parents(".cly-text-select").find(".item:contains('"+a(this).val()+"')").removeClass("hidden")):a(this).parents(".cly-text-select").find(".item").removeClass("hidden")});a(window).click(function(){a(".select-items").hide()})};c.initializeHugeDropdown=function(){var c;a("#content-container").on("mouseenter",".cly-huge-dropdown-activator",function(){clearInterval(c);var b=a(this).next(".cly-huge-dropdown");b.trigger("huge-dropdown-init");b.find(".scroll").slimScroll({height:"100%",
start:"top",wheelStep:10,position:"right",disableFadeOut:!0});b.find(".button-container .title").text(a(this).text());b.fadeIn("slow")});a("#content-container").on("mouseleave",".cly-huge-dropdown",function(){var b=a(this);c=setTimeout(function(){b.fadeOut("fast")},500)});a("#content-container").on("mouseenter",".cly-huge-dropdown",function(){clearInterval(c)});a("#content-container").on("close",".cly-huge-dropdown",function(){a(this).fadeOut("fast")})};c.revealDialog=d;c.changeDialogHeight=function(c,
b,d){var h=b||c.attr("data-height")||c.height()+15,f=c.width(),i=a("#sidebar").height()-40;c.attr("data-height",b);if(h>i)c[d?"animate":"css"]({height:i,"margin-top":Math.floor(-i/2),width:f,"margin-left":Math.floor(-f/2),"overflow-y":"auto"});else c[d?"animate":"css"]({height:h,"margin-top":Math.floor(-h/2),width:f,"margin-left":Math.floor(-f/2)})};c.removeDialog=function(c){c.remove();a("#overlay").fadeOut()};a(document).ready(function(){a("#overlay").click(function(){var c=a(".dialog:visible:not(.cly-loading)");
c.length&&(c.fadeOut().remove(),a(this).hide())});a("#dialog-ok, #dialog-cancel, #dialog-continue").live("click",function(){a(this).parents(".dialog:visible").fadeOut().remove();a(".dialog:visible").length||a("#overlay").hide()});a(document).keyup(function(c){27==c.keyCode&&(a(".dialog:visible").animate({top:0,opacity:0},{duration:1E3,easing:"easeOutQuart",complete:function(){a(this).remove()}}),a("#overlay").hide())})})})(window.CountlyHelpers=window.CountlyHelpers||{},jQuery);
$.expr[":"].contains=$.expr.createPseudo(function(c){return function(a){return 0<=$(a).text().toUpperCase().indexOf(c.toUpperCase())}});
window.DashboardView=countlyView.extend({selectedView:"#draw-total-sessions",onlineUsersGauge:null,newUsersGauge:null,initialize:function(){this.template=Handlebars.compile($("#dashboard-template").html())},beforeRender:function(){return $.when(countlyUser.initialize(),countlyCarrier.initialize(),countlyDeviceDetails.initialize()).then(function(){})},afterRender:function(){countlyLocation.drawGeoChart({height:290})},pageScript:function(){$("#total-user-estimate-ind").on("click",function(){CountlyHelpers.alert($("#total-user-estimate-exp").html(),
"black")});$(".widget-content .inner").click(function(){$(".big-numbers").removeClass("active");$(".big-numbers .select").removeClass("selected");$(this).parent(".big-numbers").addClass("active");$(this).find(".select").addClass("selected")});$(".bar-inner").on({mouseenter:function(){var a=$(this).parent().next();a.text($(this).data("item"));a.css({color:$(this).css("background-color")})},mouseleave:function(){var a=$(this).parent().next();a.text(a.data("item"));a.css({color:$(this).parent().find(".bar-inner:first-child").css("background-color")})}});
var c=this;$(".big-numbers .inner").click(function(){var a=$(this).find(".select").attr("id");if(c.selectedView=="#"+a)return!0;c.selectedView="#"+a;c.drawGraph()});app.localize()},drawGraph:function(){var c={};switch(this.selectedView){case "#draw-total-users":c=countlySession.getUserDPActive();break;case "#draw-new-users":c=countlySession.getUserDPNew();break;case "#draw-total-sessions":c=countlySession.getSessionDPTotal();break;case "#draw-time-spent":c=countlySession.getDurationDPAvg();break;
case "#draw-total-time-spent":c=countlySession.getDurationDP();break;case "#draw-avg-events-served":c=countlySession.getEventsDPAvg()}_.defer(function(){countlyCommon.drawTimeGraph(c.chartDP,"#dashboard-graph")})},renderCommon:function(c,a){var d=countlySession.getSessionData(),e=countlyLocation.getLocationData({maxCountries:7});countlySession.getSessionDPTotal();d["country-data"]=e;d["page-title"]=countlyCommon.getDateRange();d.usage=[{title:jQuery.i18n.map["common.total-sessions"],data:d.usage["total-sessions"],
id:"draw-total-sessions",help:"dashboard.total-sessions"},{title:jQuery.i18n.map["common.total-users"],data:d.usage["total-users"],id:"draw-total-users",help:"dashboard.total-users"},{title:jQuery.i18n.map["common.new-users"],data:d.usage["new-users"],id:"draw-new-users",help:"dashboard.new-users"},{title:jQuery.i18n.map["dashboard.time-spent"],data:d.usage["total-duration"],id:"draw-total-time-spent",help:"dashboard.total-time-spent"},{title:jQuery.i18n.map["dashboard.avg-time-spent"],data:d.usage["avg-duration-per-session"],
id:"draw-time-spent",help:"dashboard.avg-time-spent2"},{title:jQuery.i18n.map["dashboard.avg-reqs-received"],data:d.usage["avg-events"],id:"draw-avg-events-served",help:"dashboard.avg-reqs-received"}];d.bars=[{title:jQuery.i18n.map["common.bar.top-platform"],data:countlyDeviceDetails.getPlatformBars(),help:"dashboard.top-platforms"},{title:jQuery.i18n.map["common.bar.top-resolution"],data:countlyDeviceDetails.getResolutionBars(),help:"dashboard.top-resolutions"},{title:jQuery.i18n.map["common.bar.top-carrier"],
data:countlyCarrier.getCarrierBars(),help:"dashboard.top-carriers"},{title:jQuery.i18n.map["common.bar.top-users"],data:countlySession.getTopUserBars(),help:"dashboard.top-users"}];this.templateData=d;c||($(this.el).html(this.template(this.templateData)),$(this.selectedView).parents(".big-numbers").addClass("active"),this.pageScript(),a||this.drawGraph())},restart:function(){this.refresh(!0)},refresh:function(c){var a=this;$.when(this.beforeRender()).then(function(){if(app.activeView!=a)return!1;
a.renderCommon(!0);var d=$("<div>"+a.template(a.templateData)+"</div>");$(".rev-container").replaceWith(d.find(".rev-container"));$(".dashboard-summary").replaceWith(d.find(".dashboard-summary"));$(".widget-header .title").replaceWith(d.find(".widget-header .title"));$("#big-numbers-container").find(".big-numbers").each(function(a,b){var g=$(d.find("#big-numbers-container .big-numbers")[a]);if(c)$(b).find(".number").replaceWith(g.find(".number"));else{var h=$(b).find(".number .value"),f=parseFloat(h.text())||
0,i=h.text().replace(f,""),j=parseFloat(g.find(".number .value").text()),k=g.find(".number .value").text().replace(j,"");j!=f&&(j<f||k.length&&k!=i?$(b).find(".number").replaceWith(g.find(".number")):jQuery({someValue:f,currEl:h}).animate({someValue:j},{duration:2E3,easing:"easeInOutQuint",step:function(){-1==(j+"").indexOf(".")?this.currEl.text(Math.round(this.someValue)+k):this.currEl.text(parseFloat(this.someValue.toFixed(1))+k)}}))}$(b).find(".trend").replaceWith(g.find(".trend"));$(b).find(".spark").replaceWith(g.find(".spark"))});
a.drawGraph();$(".usparkline").peity("bar",{width:"100%",height:"30",colour:"#6BB96E",strokeColour:"#6BB96E",strokeWidth:2});$(".dsparkline").peity("bar",{width:"100%",height:"30",colour:"#C94C4C",strokeColour:"#C94C4C",strokeWidth:2});0==d.find("#map-list-right").length&&$("#map-list-right").remove();$("#map-list-right").length?$("#map-list-right").replaceWith(d.find("#map-list-right")):$(".widget.map-list").prepend(d.find("#map-list-right"));a.pageScript()})},destroy:function(){$("#content-top").html("")}});
window.SessionView=countlyView.extend({beforeRender:function(){return $.when(countlyUser.initialize()).then(function(){})},renderCommon:function(c){var a=countlySession.getSessionData(),d=countlySession.getSessionDP();this.templateData={"page-title":jQuery.i18n.map["sessions.title"],"logo-class":"sessions","big-numbers":{count:3,items:[{title:jQuery.i18n.map["common.total-sessions"],total:a.usage["total-sessions"].total,trend:a.usage["total-sessions"].trend,help:"sessions.total-sessions"},{title:jQuery.i18n.map["common.new-sessions"],
total:a.usage["new-users"].total,trend:a.usage["new-users"].trend,help:"sessions.new-sessions"},{title:jQuery.i18n.map["common.unique-sessions"],total:a.usage["total-users"].total,trend:a.usage["total-users"].trend,help:"sessions.unique-sessions"}]}};c||($(this.el).html(this.template(this.templateData)),countlyCommon.drawTimeGraph(d.chartDP,"#dashboard-graph"),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:d.chartData,aoColumns:[{mData:"date",sType:"customDate",sTitle:jQuery.i18n.map["common.date"]},
{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.unique-sessions"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var c=
this;$.when(countlyUser.initialize()).then(function(){if(app.activeView!=c)return!1;c.renderCommon(!0);newPage=$("<div>"+c.template(c.templateData)+"</div>");$(c.el).find("#big-numbers-container").html(newPage.find("#big-numbers-container").html());var a=countlySession.getSessionDP();countlyCommon.drawTimeGraph(a.chartDP,"#dashboard-graph");CountlyHelpers.refreshTable(c.dtable,a.chartData);app.localize()})}});
window.UserView=countlyView.extend({beforeRender:function(){return $.when(countlyUser.initialize()).then(function(){})},renderCommon:function(c){var a=countlySession.getSessionData(),d=countlySession.getUserDP();this.templateData={"page-title":jQuery.i18n.map["users.title"],"logo-class":"users","big-numbers":{count:3,items:[{title:jQuery.i18n.map["common.total-users"],total:a.usage["total-users"].total,trend:a.usage["total-users"].trend,help:"users.total-users"},{title:jQuery.i18n.map["common.new-users"],
total:a.usage["new-users"].total,trend:a.usage["new-users"].trend,help:"users.new-users"},{title:jQuery.i18n.map["common.returning-users"],total:a.usage["returning-users"].total,trend:a.usage["returning-users"].trend,help:"users.returning-users"}]}};c||($(this.el).html(this.template(this.templateData)),countlyCommon.drawTimeGraph(d.chartDP,"#dashboard-graph"),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:d.chartData,aoColumns:[{mData:"date",sType:"customDate",sTitle:jQuery.i18n.map["common.date"]},
{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-users"]},{mData:"returning",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.returning-users"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var c=
this;$.when(countlyUser.initialize()).then(function(){if(app.activeView!=c)return!1;c.renderCommon(!0);newPage=$("<div>"+c.template(c.templateData)+"</div>");$(c.el).find("#big-numbers-container").replaceWith(newPage.find("#big-numbers-container"));var a=countlySession.getUserDP();countlyCommon.drawTimeGraph(a.chartDP,"#dashboard-graph");CountlyHelpers.refreshTable(c.dtable,a.chartData);app.localize()})}});
window.AllAppsView=countlyView.extend({selectedView:"#draw-total-sessions",selectedApps:{all:!0},selectedCount:0,initialize:function(){this.template=Handlebars.compile($("#template-allapps").html())},beforeRender:function(){return $.when(countlyAllApps.initialize()).then(function(){})},pageScript:function(){$(".widget-content .inner").click(function(){$(".big-numbers").removeClass("active");$(".big-numbers .select").removeClass("selected");$(this).parent(".big-numbers").addClass("active");$(this).find(".select").addClass("selected")});
var c=this;$(".big-numbers .inner").click(function(){var a=$(this).find(".select").attr("id");if(c.selectedView=="#"+a)return!0;c.selectedView="#"+a;c.drawGraph()});app.localize()},drawGraph:function(){var c=[],a=countlyAllApps.getSessionData(),d,e,b=0,g;for(g in this.selectedApps)try{d=a[g][this.selectedView],e=countlyCommon.GRAPH_COLORS[b],"all"==g?c.push({data:d.data,label:d.label+" for All Apps",color:e}):c.push({data:d.data,label:d.label+" for "+countlyGlobal.apps[g].name,color:e}),$("#"+g+" .color").css("background-color",
e),b++}catch(h){}_.defer(function(){countlyCommon.drawTimeGraph(c,"#dashboard-graph")})},renderCommon:function(c){$("#sidebar-app-select").find(".text").text(jQuery.i18n.map["allapps.title"]);$("#sidebar-app-select").find(".logo").css("background-image","url('"+countlyGlobal.cdn+"images/favicon.png')");$("#sidebar-menu > .item").addClass("hide");$("#management-menu").removeClass("hide");$("#allapps-menu").removeClass("hide").css("display","block");var a=countlyAllApps.getData();this.templateData=
{"page-title":jQuery.i18n.map["allapps.title"],"logo-class":"platforms",usage:[{title:jQuery.i18n.map["common.total-sessions"],data:0,id:"draw-total-sessions",help:"dashboard.total-sessions"},{title:jQuery.i18n.map["common.total-users"],data:0,id:"draw-total-users",help:"dashboard.total-users"},{title:jQuery.i18n.map["common.new-users"],data:0,id:"draw-new-users",help:"dashboard.new-users"},{title:jQuery.i18n.map["dashboard.time-spent"],data:0,id:"draw-total-time-spent",help:"dashboard.total-time-spent"},
{title:jQuery.i18n.map["dashboard.avg-time-spent"],data:0,id:"draw-time-spent",help:"dashboard.avg-time-spent2"},{title:jQuery.i18n.map["dashboard.avg-reqs-received"],data:0,id:"draw-avg-events-served",help:"dashboard.avg-reqs-received"}]};var d=this;c||($(this.el).html(this.template(this.templateData)),$(this.selectedView).parents(".big-numbers").addClass("active"),this.pageScript(),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:a,fnRowCallback:function(a,b){$(a).attr("id",
b._id)},aoColumns:[{mData:function(a){return d.selectedApps[a._id]?"<i class='check fa fa-check'></i>":"<i class='check fa fa-unchecked'></i>"},sWidth:"10px",bSortable:!1},{mData:function(a,b){return"display"==b?("all"==a._id?"<div class='logo' style='background-image: url("+countlyGlobal.path+"/images/favicon.png);'></div> ":"<div class='logo' style='background-image: url("+countlyGlobal.cdn+"appimages/"+a._id+".png);'></div> ")+a.name+"<div class='color'></div>":a.name},sType:"string",sTitle:jQuery.i18n.map["allapps.app-name"]},
{mData:function(a,b){return"display"==b?"<div class='trend' style='background-image:url("+countlyGlobal.cdn+"images/dashboard/"+a.sessions.trend+"trend.png);'></div> "+a.sessions.total:a.sessions.total},sType:"string",sTitle:jQuery.i18n.map["allapps.total-sessions"]},{mData:function(a,b){return"display"==b?"<div class='trend' style='background-image:url("+countlyGlobal.cdn+"images/dashboard/"+a.users.trend+"trend.png);'></div> "+a.users.total:a.users.total},sType:"string",sTitle:jQuery.i18n.map["allapps.total-users"]},
{mData:function(a,b){return"display"==b?"<div class='trend' style='background-image:url("+countlyGlobal.cdn+"images/dashboard/"+a.newusers.trend+"trend.png);'></div> "+a.newusers.total:a.newusers.total},sType:"string",sTitle:jQuery.i18n.map["allapps.new-users"]},{mData:function(a,b){return"display"==b?"<div class='trend' style='background-image:url("+countlyGlobal.cdn+"images/dashboard/"+a.duration.trend+"trend.png);'></div> "+a.duration.total:a.duration.total},sType:"string",sTitle:jQuery.i18n.map["allapps.total-duration"]},
{mData:function(a,b){return"display"==b?"<div class='trend' style='background-image:url("+countlyGlobal.cdn+"images/dashboard/"+a.avgduration.trend+"trend.png);'></div> "+a.avgduration.total:a.avgduration.total},sType:"string",sTitle:jQuery.i18n.map["allapps.average-duration"]}]})),this.drawGraph(),$(".dataTable-bottom").append("<div clas='dataTables_info' style='float: right; margin-top:2px; margin-right: 10px;'>Maximum number of applications to be compared (10)</div>"),$(".d-table").stickyTableHeaders(),
$(".allapps tbody").on("click","tr",function(a){var b=$(a.target).closest("td"),a=$(this);if(a.children().first().is(b)){if(d.selectedApps[a.attr("id")])a.find(".check").removeClass("fa fa-check").addClass("fa fa-unchecked"),a.find(".color").css("background-color","transparent"),delete d.selectedApps[a.attr("id")],"all"!=a.attr("id")&&d.selectedCount--,0==d.selectedCount&&($("#empty-graph").show(),$(".big-numbers").removeClass("active"),$(".big-numbers .select").removeClass("selected"));else if(10>
d.selectedCount||"all"==a.attr("id"))0==d.selectedCount&&($("#empty-graph").hide(),$(d.selectedView).parents(".big-numbers").addClass("active")),"all"==a.attr("id")?($(".check.icon-check").removeClass("fa fa-check").addClass("fa fa-unchecked"),$(".d-table").find(".color").css("background-color","transparent"),d.selectedApps={},d.selectedCount=0):(d.selectedApps.all&&($(".d-table #all .check.icon-check").removeClass("fa fa-check").addClass("fa fa-unchecked"),$(".d-table #all").find(".color").css("background-color",
"transparent"),delete d.selectedApps.all),d.selectedCount++),a.find(".check").removeClass("fa fa-unchecked").addClass("fa fa-check"),d.selectedApps[a.attr("id")]=!0;d.drawGraph()}else"all"!=a.attr("id")&&(b=d.dtable.fnGetData(this),countlyAllApps.setApp(a.attr("id")),$("#sidebar-app-select").find(".logo").css("background-image","url('"+countlyGlobal.cdn+"appimages/"+a.attr("id")+".png')"),$("#sidebar-app-select").find(".text").text(b.name),$("#sidebar-menu > .item").removeClass("hide"),$("#allapps-menu").css("display",
"none"),window.location.hash="#/")}))},refresh:function(){var c=this;$.when(countlyAllApps.initialize()).then(function(){if(app.activeView!=c)return!1;c.renderCommon(!0);newPage=$("<div>"+c.template(c.templateData)+"</div>");var a=countlyAllApps.getData();CountlyHelpers.refreshTable(c.dtable,a);c.drawGraph();app.localize()})}});
window.LoyaltyView=countlyView.extend({beforeRender:function(){return $.when(countlyUser.initialize()).then(function(){})},renderCommon:function(c){var a=countlyUser.getLoyaltyData();this.templateData={"page-title":jQuery.i18n.map["user-loyalty.title"],"logo-class":"loyalty","chart-helper":"loyalty.chart","table-helper":"loyalty.table"};c||($(this.el).html(this.template(this.templateData)),countlyCommon.drawGraph(a.chartDP,"#dashboard-graph","bar"),this.dtable=$(".d-table").dataTable($.extend({},
$.fn.dataTable.defaults,{aaData:a.chartData,aoColumns:[{mData:"l",sType:"loyalty",sTitle:jQuery.i18n.map["user-loyalty.table.session-count"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.number-of-users"]},{mData:"percent",sType:"percent",sTitle:jQuery.i18n.map["common.percent"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var c=this;$.when(countlyUser.initialize()).then(function(){if(app.activeView!=c)return!1;
var a=countlyUser.getLoyaltyData();countlyCommon.drawGraph(a.chartDP,"#dashboard-graph","bar");CountlyHelpers.refreshTable(c.dtable,a.chartData)})}});
window.CountriesView=countlyView.extend({cityView:store.get("countly_location_city")?store.get("countly_active_app"):!1,initialize:function(){this.template=Handlebars.compile($("#template-analytics-countries").html())},beforeRender:function(){return $.when(countlyUser.initialize(),countlyCity.initialize()).then(function(){})},drawTable:function(){var c=this.cityView?jQuery.i18n.map["countries.table.city"]:jQuery.i18n.map["countries.table.country"],a,d="country_flag";this.cityView?(a=countlyCity.getLocationData(),
d="city"):a=countlyLocation.getLocationData();var e=countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID];e&&e.country&&$("#toggle-map").text(countlyLocation.getCountryName(e.country));this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:a,aoColumns:[{mData:d,sTitle:c},{mData:"t",sType:"formatted-num",mRender:function(b){return countlyCommon.formatNumber(b)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(b){return countlyCommon.formatNumber(b)},
sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(b){return countlyCommon.formatNumber(b)},sTitle:jQuery.i18n.map["common.table.new-users"]}]}));$(".d-table").stickyTableHeaders()},renderCommon:function(c){var a=countlySession.getSessionData();this.templateData={"page-title":jQuery.i18n.map["countries.title"],"logo-class":"countries","big-numbers":{count:3,items:[{title:jQuery.i18n.map["common.total-sessions"],total:a.usage["total-sessions"].total,
trend:a.usage["total-sessions"].trend,help:"countries.total-sessions"},{title:jQuery.i18n.map["common.total-users"],total:a.usage["total-users"].total,trend:a.usage["total-users"].trend,help:"countries.total-users"},{title:jQuery.i18n.map["common.new-users"],total:a.usage["new-users"].total,trend:a.usage["new-users"].trend,help:"countries.new-users"}]},"chart-helper":"countries.chart","table-helper":"countries.table"};var d=this;$(document).bind("selectMapCountry",function(){d.cityView=!0;store.set("countly_location_city",
!0);$("#toggle-map").addClass("active");countlyCity.drawGeoChart({height:450});d.refresh(!0)});c||($(this.el).html(this.template(this.templateData)),this.cityView?(countlyCity.drawGeoChart({height:450}),$("#toggle-map").addClass("active")):countlyLocation.drawGeoChart({height:450}),this.drawTable(),!1===countlyCommon.CITY_DATA&&($("#toggle-map").hide(),store.set("countly_location_city",!1)),$("#toggle-map").on("click",function(){$(this).hasClass("active")?(d.cityView=!1,countlyLocation.drawGeoChart({height:450}),
$(this).removeClass("active"),d.refresh(!0),store.set("countly_location_city",!1)):(d.cityView=!0,countlyCity.drawGeoChart({height:450}),$(this).addClass("active"),d.refresh(!0),store.set("countly_location_city",!0))}))},refresh:function(c){var a=this;$.when(this.beforeRender()).then(function(){if(app.activeView!=a)return!1;a.renderCommon(!0);newPage=$("<div>"+a.template(a.templateData)+"</div>");$(a.el).find("#big-numbers-container").replaceWith(newPage.find("#big-numbers-container"));if(c)a.drawTable();
else{var d;a.cityView?(d=countlyCity.getLocationData(),countlyCity.refreshGeoChart()):(d=countlyLocation.getLocationData(),countlyLocation.refreshGeoChart());CountlyHelpers.refreshTable(a.dtable,d)}app.localize()})}});
window.FrequencyView=countlyView.extend({beforeRender:function(){return $.when(countlyUser.initialize()).then(function(){})},renderCommon:function(c){var a=countlyUser.getFrequencyData();this.templateData={"page-title":jQuery.i18n.map["session-frequency.title"],"logo-class":"frequency","chart-helper":"frequency.chart","table-helper":"frequency.table"};c||($(this.el).html(this.template(this.templateData)),countlyCommon.drawGraph(a.chartDP,"#dashboard-graph","bar"),this.dtable=$(".d-table").dataTable($.extend({},
$.fn.dataTable.defaults,{aaData:a.chartData,aoColumns:[{mData:"f",sType:"frequency",sTitle:jQuery.i18n.map["session-frequency.table.time-after"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.number-of-users"]},{mData:"percent",sType:"percent",sTitle:jQuery.i18n.map["common.percent"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var c=this;$.when(countlyUser.initialize()).then(function(){if(app.activeView!=
c)return!1;var a=countlyUser.getFrequencyData();countlyCommon.drawGraph(a.chartDP,"#dashboard-graph","bar");CountlyHelpers.refreshTable(c.dtable,a.chartData)})}});
window.DeviceView=countlyView.extend({beforeRender:function(){return $.when(countlyDevice.initialize(),countlyDeviceDetails.initialize()).then(function(){})},pageScript:function(){$(".bar-inner").on({mouseenter:function(){var c=$(this).parent().next();c.text($(this).data("item"));c.css({color:$(this).css("background-color")})},mouseleave:function(){var c=$(this).parent().next();c.text(c.data("item"));c.css({color:$(this).parent().find(".bar-inner:first-child").css("background-color")})}});app.localize()},
renderCommon:function(c){var a=countlyDevice.getDeviceData();this.templateData={"page-title":jQuery.i18n.map["devices.title"],"logo-class":"devices","graph-type-double-pie":!0,"pie-titles":{left:jQuery.i18n.map["common.total-users"],right:jQuery.i18n.map["common.new-users"]},bars:[{title:jQuery.i18n.map["common.bar.top-platform"],data:countlyDeviceDetails.getPlatformBars(),help:"dashboard.top-platforms"},{title:jQuery.i18n.map["common.bar.top-platform-version"],data:countlyDeviceDetails.getOSVersionBars(),
help:"devices.platform-versions2"},{title:jQuery.i18n.map["common.bar.top-resolution"],data:countlyDeviceDetails.getResolutionBars(),help:"dashboard.top-resolutions"}],"chart-helper":"devices.chart","table-helper":""};c||($(this.el).html(this.template(this.templateData)),this.pageScript(),countlyCommon.drawGraph(a.chartDPTotal,"#dashboard-graph","pie"),countlyCommon.drawGraph(a.chartDPNew,"#dashboard-graph2","pie"),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:a.chartData,
aoColumns:[{mData:"device",sTitle:jQuery.i18n.map["devices.table.device"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-users"]}]})),
$(".d-table").stickyTableHeaders())},refresh:function(){var c=this;$.when(this.beforeRender()).then(function(){if(app.activeView!=c)return!1;c.renderCommon(!0);newPage=$("<div>"+c.template(c.templateData)+"</div>");$(c.el).find(".dashboard-summary").replaceWith(newPage.find(".dashboard-summary"));var a=countlyDevice.getDeviceData();countlyCommon.drawGraph(a.chartDPTotal,"#dashboard-graph","pie");countlyCommon.drawGraph(a.chartDPNew,"#dashboard-graph2","pie");CountlyHelpers.refreshTable(c.dtable,a.chartData);
c.pageScript()})}});
window.PlatformView=countlyView.extend({activePlatform:null,beforeRender:function(){return $.when(countlyDeviceDetails.initialize()).then(function(){})},pageScript:function(){var c=this;c.activePlatform?$(".graph-segment[data-name='"+c.activePlatform+"']").addClass("active"):$(".graph-segment:first-child").addClass("active");$(".graph-segment").on("click",function(){c.activePlatform=$(this).data("name");$(".graph-segment").removeClass("active");$(this).addClass("active");c.refresh()});app.localize()},
renderCommon:function(c){var a=countlyDeviceDetails.getOSVersionData(this.activePlatform),d=countlyDeviceDetails.getPlatformData();this.templateData={"page-title":jQuery.i18n.map["platforms.title"],"logo-class":"platforms","graph-type-double-pie":!0,"pie-titles":{left:jQuery.i18n.map["platforms.pie-left"],right:jQuery.i18n.map["platforms.pie-right"]},"graph-segmentation":a.os,"chart-helper":"platform-versions.chart","table-helper":"","two-tables":!0};c||($(this.el).html(this.template(this.templateData)),
this.pageScript(),countlyCommon.drawGraph(d.chartDP,"#dashboard-graph","pie"),countlyCommon.drawGraph(a.chartDP,"#dashboard-graph2","pie"),this.dtable=$("#dataTableOne").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:d.chartData,aoColumns:[{mData:"os_",sTitle:jQuery.i18n.map["platforms.table.platform"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},
sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-users"]}]})),this.dtableTwo=$("#dataTableTwo").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:a.chartData,aoColumns:[{mData:"os_version",sTitle:jQuery.i18n.map["platforms.table.platform-version"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},
{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-users"]}]})),$("#dataTableTwo").stickyTableHeaders())},refresh:function(){var c=this;$.when(this.beforeRender()).then(function(){if(app.activeView!=c)return!1;c.renderCommon(!0);var a=countlyDeviceDetails.getOSVersionData(c.activePlatform),
d=countlyDeviceDetails.getPlatformData(),e=$("<div>"+c.template(c.templateData)+"</div>");$(c.el).find(".dashboard-summary").replaceWith(e.find(".dashboard-summary"));$(c.el).find(".graph-segment-container").replaceWith(e.find(".graph-segment-container"));countlyCommon.drawGraph(d.chartDP,"#dashboard-graph","pie");countlyCommon.drawGraph(a.chartDP,"#dashboard-graph2","pie");CountlyHelpers.refreshTable(c.dtable,d.chartData);CountlyHelpers.refreshTable(c.dtableTwo,a.chartData);c.pageScript()})}});
window.AppVersionView=countlyView.extend({beforeRender:function(){return $.when(countlyDeviceDetails.initialize()).then(function(){})},renderCommon:function(c){var a=countlyAppVersion.getAppVersionData();this.templateData={"page-title":jQuery.i18n.map["app-versions.title"],"logo-class":"app-versions","chart-helper":"app-versions.chart","table-helper":""};c||($(this.el).html(this.template(this.templateData)),countlyCommon.drawGraph(a.chartDP,"#dashboard-graph","bar"),this.dtable=$(".d-table").dataTable($.extend({},
$.fn.dataTable.defaults,{aaData:a.chartData,aoColumns:[{mData:"app_version",sTitle:jQuery.i18n.map["app-versions.table.app-version"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},
sTitle:jQuery.i18n.map["common.table.new-users"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var c=this;$.when(this.beforeRender()).then(function(){if(app.activeView!=c)return!1;var a=countlyAppVersion.getAppVersionData();countlyCommon.drawGraph(a.chartDP,"#dashboard-graph","bar");CountlyHelpers.refreshTable(c.dtable,a.chartData)})}});
window.CarrierView=countlyView.extend({beforeRender:function(){return $.when(countlyCarrier.initialize()).then(function(){})},renderCommon:function(c){var a=countlyCarrier.getCarrierData();this.templateData={"page-title":jQuery.i18n.map["carriers.title"],"logo-class":"carriers","graph-type-double-pie":!0,"pie-titles":{left:jQuery.i18n.map["common.total-users"],right:jQuery.i18n.map["common.new-users"]},"chart-helper":"carriers.chart","table-helper":""};c||($(this.el).html(this.template(this.templateData)),
countlyCommon.drawGraph(a.chartDPTotal,"#dashboard-graph","pie"),countlyCommon.drawGraph(a.chartDPNew,"#dashboard-graph2","pie"),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:a.chartData,aoColumns:[{mData:"carrier",sTitle:jQuery.i18n.map["carriers.table.carrier"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},
sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-users"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var c=this;$.when(this.beforeRender()).then(function(){if(app.activeView!=c)return!1;var a=countlyCarrier.getCarrierData();countlyCommon.drawGraph(a.chartDPTotal,"#dashboard-graph","pie");countlyCommon.drawGraph(a.chartDPNew,"#dashboard-graph2","pie");
CountlyHelpers.refreshTable(c.dtable,a.chartData)})}});
window.ResolutionView=countlyView.extend({beforeRender:function(){return $.when(countlyDeviceDetails.initialize()).then(function(){})},renderCommon:function(c){var a=countlyDeviceDetails.getResolutionData();this.templateData={"page-title":jQuery.i18n.map["resolutions.title"],"logo-class":"resolutions","graph-type-double-pie":!0,"pie-titles":{left:jQuery.i18n.map["common.total-users"],right:jQuery.i18n.map["common.new-users"]},"chart-helper":"resolutions.chart"};c||($(this.el).html(this.template(this.templateData)),
countlyCommon.drawGraph(a.chartDPTotal,"#dashboard-graph","pie"),countlyCommon.drawGraph(a.chartDPNew,"#dashboard-graph2","pie"),this.dtable=$(".d-table").dataTable($.extend({},$.fn.dataTable.defaults,{aaData:a.chartData,aoColumns:[{mData:"resolution",sTitle:jQuery.i18n.map["resolutions.table.resolution"]},{mData:"width",sTitle:jQuery.i18n.map["resolutions.table.width"]},{mData:"height",sTitle:jQuery.i18n.map["resolutions.table.height"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},
sTitle:jQuery.i18n.map["common.table.total-sessions"]},{mData:"u",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.total-users"]},{mData:"n",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.table.new-users"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var c=this;$.when(countlyDeviceDetails.initialize()).then(function(){if(app.activeView!=c)return!1;c.renderCommon(!0);
newPage=$("<div>"+c.template(c.templateData)+"</div>");$(c.el).find(".dashboard-summary").replaceWith(newPage.find(".dashboard-summary"));var a=countlyDeviceDetails.getResolutionData();countlyCommon.drawGraph(a.chartDPTotal,"#dashboard-graph","pie");countlyCommon.drawGraph(a.chartDPNew,"#dashboard-graph2","pie");CountlyHelpers.refreshTable(c.dtable,a.chartData)})}});
window.DurationView=countlyView.extend({beforeRender:function(){return $.when(countlyUser.initialize()).then(function(){})},renderCommon:function(c){var a=countlySession.getDurationData();this.templateData={"page-title":jQuery.i18n.map["session-duration.title"],"logo-class":"durations","chart-helper":"durations.chart","table-helper":"durations.table"};c||($(this.el).html(this.template(this.templateData)),countlyCommon.drawGraph(a.chartDP,"#dashboard-graph","bar"),this.dtable=$(".d-table").dataTable($.extend({},
$.fn.dataTable.defaults,{aaData:a.chartData,aoColumns:[{mData:"ds",sType:"session-duration",sTitle:jQuery.i18n.map["session-duration.table.duration"]},{mData:"t",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:jQuery.i18n.map["common.number-of-users"]},{mData:"percent",sType:"percent",sTitle:jQuery.i18n.map["common.percent"]}]})),$(".d-table").stickyTableHeaders())},refresh:function(){var c=this;$.when(countlyUser.initialize()).then(function(){if(app.activeView!=
c)return!1;var a=countlySession.getDurationData();countlyCommon.drawGraph(a.chartDP,"#dashboard-graph","bar");CountlyHelpers.refreshTable(c.dtable,a.chartData)})}});
window.ManageAppsView=countlyView.extend({initialize:function(){this.template=Handlebars.compile($("#template-management-applications").html())},renderCommon:function(){function c(c){if(jQuery.isEmptyObject(countlyGlobal.apps))return b(),$("#no-app-warning").show(),!1;if(jQuery.isEmptyObject(countlyGlobal.admin_apps))return b(),!1;$("#app-container-new").remove();$("#add-new-app").hide();e();$("#view-app").show();countlyGlobal.admin_apps[c]?$("#delete-app").show():$("#delete-app").hide();$("#new-install-overlay").is(":visible")&&
($("#no-app-warning").hide(),$("#first-app-success").show(),$("#new-install-overlay").fadeOut(),countlyCommon.setActiveApp(c),$("#sidebar-app-select").find(".logo").css("background-image","url('"+countlyGlobal.cdn+"appimages/"+c+".png')"),$("#sidebar-app-select").find(".text").text(countlyGlobal.apps[c].name));$("#app-edit-id").val(c);$("#view-app").find(".widget-header .title").text(countlyGlobal.apps[c].name);$("#app-edit-name").find(".read").text(countlyGlobal.apps[c].name);$("#app-edit-name").find(".edit input").val(countlyGlobal.apps[c].name);
$("#view-app-key").text(countlyGlobal.apps[c].key);$("#view-app-id").text(c);$("#app-edit-category").find(".cly-select .text").text(g[countlyGlobal.apps[c].category]);$("#app-edit-category").find(".cly-select .text").data("value",countlyGlobal.apps[c].category);$("#app-edit-timezone").find(".cly-select .text").data("value",countlyGlobal.apps[c].timezone);$("#app-edit-category").find(".read").text(g[countlyGlobal.apps[c].category]);$("#app-edit-image").find(".read .logo").css({"background-image":'url("'+
countlyGlobal.cdn+"appimages/"+c+'.png")'});for(var d=h[countlyGlobal.apps[c].country],f=0;f<d.z.length;f++)for(var l in d.z[f])if(d.z[f][l]==countlyGlobal.apps[c].timezone){var p=$("#app-edit-timezone").find(".read"),v=countlyGlobal.apps[c].country;p.find(".flag").css({"background-image":"url("+countlyGlobal.cdn+"images/flags/"+v.toLowerCase()+".png)"});p.find(".country").text(d.n);p.find(".timezone").text(l);a("#app-edit-timezone",v,l,d.z[f][l]);break}}function a(b,a,c,d){$(b+" #timezone-select").hide();
$(b+" #selected").hide();$(b+" #timezone-items").html("");$(b+" #country-items").html("");var f=$(b+" #country-items"),g=$(b+" #timezone-items"),e;for(e in h)f.append("<div data-value='"+e+"' class='item'><div class='flag' style='background-image:url("+countlyGlobal.cdn+"images/flags/"+e.toLowerCase()+".png)'></div>"+h[e].n+"</div>");if(a&&c&&d){f=h[a];if(1==f.z.length)for(var r in f.z[0])$(b+" #selected").show(),$(b+" #selected").text(r),$(b+" #app-timezone").val(f.z[0][r]),$(b+" #app-country").val(a),
$(b+" #country-select .text").html("<div class='flag' style='background-image:url("+countlyGlobal.cdn+"images/flags/"+a.toLowerCase()+".png)'></div>"+f.n);else{$(b+" #timezone-select").find(".text").text(r);e=f.z;for(var u=0;u<e.length;u++)for(r in e[u])g.append("<div data-value='"+e[u][r]+"' class='item'>"+r+"</div>");$(b+" #app-timezone").val(d);$(b+" #app-country").val(a);$(b+" #country-select .text").html("<div class='flag' style='background-image:url("+countlyGlobal.cdn+"images/flags/"+a.toLowerCase()+
".png)'></div>"+f.n);$(b+" #timezone-select .text").text(c);$(b+" #timezone-select").show()}$(b+" .select-items .item").click(function(){var b=$(this).parents(".cly-select").find(".text");b.html($(this).html());b.data("value",$(this).data("value"))});$(b+" #timezone-items .item").click(function(){$(b+" #app-timezone").val($(this).data("value"))})}$(b+" #country-items .item").click(function(){$(b+" #selected").text("");$(b+" #timezone-select").hide();g.html("");var a=$(this).data("value");if(1==h[a].z.length)for(var c in h[a].z[0])$(b+
" #selected").show(),$(b+" #selected").text(c),$(b+" #app-timezone").val(h[a].z[0][c]),$(b+" #app-country").val(a);else{for(var d="",f=0;f<h[a].z.length;f++)for(c in h[a].z[f])0==f&&($(b+" #timezone-select").find(".text").text(c),d=h[a].z[0][c],$(b+" #app-country").val(a)),g.append("<div data-value='"+h[a].z[f][c]+"' class='item'>"+c+"</div>");$(b+" #timezone-select").show();$(b+" #app-timezone").val(d);$(b+" .select-items .item").click(function(){var b=$(this).parents(".cly-select").find(".text");
b.html($(this).html());b.data("value",$(this).data("value"))});$(b+" #timezone-items .item").click(function(){$(b+" #app-timezone").val($(this).data("value"))})}})}function d(){$("#edit-app").removeClass("active");$(".edit").hide();$(".read").show();$(".table-edit").hide();$(".required").hide()}function e(){$("#app-add-name").val("");$("#app-add-category").text(jQuery.i18n.map["management-applications.category.tip"]);$("#app-add-category").data("value","");$("#app-add-timezone #selected").text("");
$("#app-add-timezone #selected").hide();$("#app-add-timezone .text").html(jQuery.i18n.map["management-applications.time-zone.tip"]);$("#app-add-timezone .text").data("value","");$("#app-add-timezone #app-timezone").val("");$("#app-add-timezone #app-country").val("");$("#app-add-timezone #timezone-select").hide();$(".required").hide()}function b(){if($("#app-container-new").is(":visible"))return!1;$(".app-container").removeClass("active");$("#first-app-success").hide();d();var b=$("#manage-new-app>div").clone();
b.attr("id","app-container-new");b.addClass("active");jQuery.isEmptyObject(countlyGlobal.apps)?$("#cancel-app-add").hide():$("#cancel-app-add").show();$("#app-management-bar .scrollable").append(b);$("#add-new-app").show();$("#view-app").hide();var b=jstz.determine().name(),c;for(c in h)for(var f=0;f<h[c].z.length;f++)for(var e in h[c].z[f])if(h[c].z[f][e]==b){a("#app-add-timezone",c,e,b);break}}$(this.el).html(this.template({admin_apps:countlyGlobal.admin_apps}));var g={1:jQuery.i18n.map["application-category.books"],
2:jQuery.i18n.map["application-category.business"],3:jQuery.i18n.map["application-category.education"],4:jQuery.i18n.map["application-category.entertainment"],5:jQuery.i18n.map["application-category.finance"],6:jQuery.i18n.map["application-category.games"],7:jQuery.i18n.map["application-category.health-fitness"],8:jQuery.i18n.map["application-category.lifestyle"],9:jQuery.i18n.map["application-category.medical"],10:jQuery.i18n.map["application-category.music"],11:jQuery.i18n.map["application-category.navigation"],
12:jQuery.i18n.map["application-category.news"],13:jQuery.i18n.map["application-category.photography"],14:jQuery.i18n.map["application-category.productivity"],15:jQuery.i18n.map["application-category.reference"],16:jQuery.i18n.map["application-category.social-networking"],17:jQuery.i18n.map["application-category.sports"],18:jQuery.i18n.map["application-category.travel"],19:jQuery.i18n.map["application-category.utilities"],20:jQuery.i18n.map["application-category.weather"]},h={AF:{n:"Afghanistan",
z:[{"(GMT+04:30) Kabul":"Asia/Kabul"}]},AL:{n:"Albania",z:[{"(GMT+01:00) Tirane":"Europe/Tirane"}]},DZ:{n:"Algeria",z:[{"(GMT+01:00) Algiers":"Africa/Algiers"}]},AS:{n:"American Samoa",z:[{"(GMT-11:00) Pago Pago":"Pacific/Pago_Pago"}]},AD:{n:"Andorra",z:[{"(GMT+01:00) Andorra":"Europe/Andorra"}]},AO:{n:"Angola",z:[{"(GMT+01:00) Luanda":"Africa/Luanda"}]},AI:{n:"Anguilla",z:[{"(GMT-04:00) Anguilla":"America/Anguilla"}]},AQ:{n:"Antarctica",z:[{"(GMT-04:00) Palmer":"Antarctica/Palmer"},{"(GMT-03:00) Rothera":"Antarctica/Rothera"},
{"(GMT+03:00) Syowa":"Antarctica/Syowa"},{"(GMT+05:00) Mawson":"Antarctica/Mawson"},{"(GMT+06:00) Vostok":"Antarctica/Vostok"},{"(GMT+07:00) Davis":"Antarctica/Davis"},{"(GMT+08:00) Casey":"Antarctica/Casey"},{"(GMT+10:00) Dumont D'Urville":"Antarctica/DumontDUrville"}]},AG:{n:"Antigua and Barbuda",z:[{"(GMT-04:00) Antigua":"America/Antigua"}]},AR:{n:"Argentina",z:[{"(GMT-03:00) Buenos Aires":"America/Buenos_Aires"}]},AM:{n:"Armenia",z:[{"(GMT+04:00) Yerevan":"Asia/Yerevan"}]},AW:{n:"Aruba",z:[{"(GMT-04:00) Aruba":"America/Aruba"}]},
AU:{n:"Australia",z:[{"(GMT+08:00) Western Time - Perth":"Australia/Perth"},{"(GMT+09:30) Central Time - Adelaide":"Australia/Adelaide"},{"(GMT+09:30) Central Time - Darwin":"Australia/Darwin"},{"(GMT+10:00) Eastern Time - Brisbane":"Australia/Brisbane"},{"(GMT+10:00) Eastern Time - Hobart":"Australia/Hobart"},{"(GMT+10:00) Eastern Time - Melbourne, Sydney":"Australia/Sydney"}]},AT:{n:"Austria",z:[{"(GMT+01:00) Vienna":"Europe/Vienna"}]},AZ:{n:"Azerbaijan",z:[{"(GMT+04:00) Baku":"Asia/Baku"}]},BS:{n:"Bahamas",
z:[{"(GMT-05:00) Nassau":"America/Nassau"}]},BH:{n:"Bahrain",z:[{"(GMT+03:00) Bahrain":"Asia/Bahrain"}]},BD:{n:"Bangladesh",z:[{"(GMT+06:00) Dhaka":"Asia/Dhaka"}]},BB:{n:"Barbados",z:[{"(GMT-04:00) Barbados":"America/Barbados"}]},BY:{n:"Belarus",z:[{"(GMT+03:00) Minsk":"Europe/Minsk"}]},BE:{n:"Belgium",z:[{"(GMT+01:00) Brussels":"Europe/Brussels"}]},BZ:{n:"Belize",z:[{"(GMT-06:00) Belize":"America/Belize"}]},BJ:{n:"Benin",z:[{"(GMT+01:00) Porto-Novo":"Africa/Porto-Novo"}]},BM:{n:"Bermuda",z:[{"(GMT-04:00) Bermuda":"Atlantic/Bermuda"}]},
BT:{n:"Bhutan",z:[{"(GMT+06:00) Thimphu":"Asia/Thimphu"}]},BO:{n:"Bolivia",z:[{"(GMT-04:00) La Paz":"America/La_Paz"}]},BA:{n:"Bosnia and Herzegovina",z:[{"(GMT+01:00) Central European Time - Belgrade":"Europe/Sarajevo"}]},BW:{n:"Botswana",z:[{"(GMT+02:00) Gaborone":"Africa/Gaborone"}]},BR:{n:"Brazil",z:[{"(GMT-04:00) Boa Vista":"America/Boa_Vista"},{"(GMT-04:00) Campo Grande":"America/Campo_Grande"},{"(GMT-04:00) Cuiaba":"America/Cuiaba"},{"(GMT-04:00) Manaus":"America/Manaus"},{"(GMT-04:00) Porto Velho":"America/Porto_Velho"},
{"(GMT-04:00) Rio Branco":"America/Rio_Branco"},{"(GMT-03:00) Araguaina":"America/Araguaina"},{"(GMT-03:00) Belem":"America/Belem"},{"(GMT-03:00) Fortaleza":"America/Fortaleza"},{"(GMT-03:00) Maceio":"America/Maceio"},{"(GMT-03:00) Recife":"America/Recife"},{"(GMT-03:00) Salvador":"America/Bahia"},{"(GMT-03:00) Sao Paulo":"America/Sao_Paulo"},{"(GMT-02:00) Noronha":"America/Noronha"}]},IO:{n:"British Indian Ocean Territory",z:[{"(GMT+06:00) Chagos":"Indian/Chagos"}]},VG:{n:"British Virgin Islands",
z:[{"(GMT-04:00) Tortola":"America/Tortola"}]},BN:{n:"Brunei",z:[{"(GMT+08:00) Brunei":"Asia/Brunei"}]},BG:{n:"Bulgaria",z:[{"(GMT+02:00) Sofia":"Europe/Sofia"}]},BF:{n:"Burkina Faso",z:[{"(GMT+00:00) Ouagadougou":"Africa/Ouagadougou"}]},BI:{n:"Burundi",z:[{"(GMT+02:00) Bujumbura":"Africa/Bujumbura"}]},KH:{n:"Cambodia",z:[{"(GMT+07:00) Phnom Penh":"Asia/Phnom_Penh"}]},CM:{n:"Cameroon",z:[{"(GMT+01:00) Douala":"Africa/Douala"}]},CA:{n:"Canada",z:[{"(GMT-07:00) Mountain Time - Dawson Creek":"America/Dawson_Creek"},
{"(GMT-08:00) Pacific Time - Vancouver":"America/Vancouver"},{"(GMT-08:00) Pacific Time - Whitehorse":"America/Whitehorse"},{"(GMT-06:00) Central Time - Regina":"America/Regina"},{"(GMT-07:00) Mountain Time - Edmonton":"America/Edmonton"},{"(GMT-07:00) Mountain Time - Yellowknife":"America/Yellowknife"},{"(GMT-06:00) Central Time - Winnipeg":"America/Winnipeg"},{"(GMT-05:00) Eastern Time - Iqaluit":"America/Iqaluit"},{"(GMT-05:00) Eastern Time - Montreal":"America/Montreal"},{"(GMT-05:00) Eastern Time - Toronto":"America/Toronto"},
{"(GMT-04:00) Atlantic Time - Halifax":"America/Halifax"},{"(GMT-03:30) Newfoundland Time - St. Johns":"America/St_Johns"}]},CV:{n:"Cape Verde",z:[{"(GMT-01:00) Cape Verde":"Atlantic/Cape_Verde"}]},KY:{n:"Cayman Islands",z:[{"(GMT-05:00) Cayman":"America/Cayman"}]},CF:{n:"Central African Republic",z:[{"(GMT+01:00) Bangui":"Africa/Bangui"}]},TD:{n:"Chad",z:[{"(GMT+01:00) Ndjamena":"Africa/Ndjamena"}]},CL:{n:"Chile",z:[{"(GMT-06:00) Easter Island":"Pacific/Easter"},{"(GMT-04:00) Santiago":"America/Santiago"}]},
CN:{n:"China",z:[{"(GMT+08:00) China Time - Beijing":"Asia/Shanghai"}]},CX:{n:"Christmas Island",z:[{"(GMT+07:00) Christmas":"Indian/Christmas"}]},CC:{n:"Cocos [Keeling] Islands",z:[{"(GMT+06:30) Cocos":"Indian/Cocos"}]},CO:{n:"Colombia",z:[{"(GMT-05:00) Bogota":"America/Bogota"}]},KM:{n:"Comoros",z:[{"(GMT+03:00) Comoro":"Indian/Comoro"}]},CD:{n:"Congo [DRC]",z:[{"(GMT+01:00) Kinshasa":"Africa/Kinshasa"},{"(GMT+02:00) Lubumbashi":"Africa/Lubumbashi"}]},CG:{n:"Congo [Republic]",z:[{"(GMT+01:00) Brazzaville":"Africa/Brazzaville"}]},
CK:{n:"Cook Islands",z:[{"(GMT-10:00) Rarotonga":"Pacific/Rarotonga"}]},CR:{n:"Costa Rica",z:[{"(GMT-06:00) Costa Rica":"America/Costa_Rica"}]},CI:{n:"C\u00f4te d\u2019Ivoire",z:[{"(GMT+00:00) Abidjan":"Africa/Abidjan"}]},HR:{n:"Croatia",z:[{"(GMT+01:00) Central European Time - Belgrade":"Europe/Zagreb"}]},CU:{n:"Cuba",z:[{"(GMT-05:00) Havana":"America/Havana"}]},CW:{n:"Cura\u00e7ao",z:[{"(GMT-04:00) Curacao":"America/Curacao"}]},CY:{n:"Cyprus",z:[{"(GMT+02:00) Nicosia":"Asia/Nicosia"}]},CZ:{n:"Czech Republic",
z:[{"(GMT+01:00) Central European Time - Prague":"Europe/Prague"}]},DK:{n:"Denmark",z:[{"(GMT+01:00) Copenhagen":"Europe/Copenhagen"}]},DJ:{n:"Djibouti",z:[{"(GMT+03:00) Djibouti":"Africa/Djibouti"}]},DM:{n:"Dominica",z:[{"(GMT-04:00) Dominica":"America/Dominica"}]},DO:{n:"Dominican Republic",z:[{"(GMT-04:00) Santo Domingo":"America/Santo_Domingo"}]},EC:{n:"Ecuador",z:[{"(GMT-06:00) Galapagos":"Pacific/Galapagos"},{"(GMT-05:00) Guayaquil":"America/Guayaquil"}]},EG:{n:"Egypt",z:[{"(GMT+02:00) Cairo":"Africa/Cairo"}]},
SV:{n:"El Salvador",z:[{"(GMT-06:00) El Salvador":"America/El_Salvador"}]},GQ:{n:"Equatorial Guinea",z:[{"(GMT+01:00) Malabo":"Africa/Malabo"}]},ER:{n:"Eritrea",z:[{"(GMT+03:00) Asmera":"Africa/Asmera"}]},EE:{n:"Estonia",z:[{"(GMT+02:00) Tallinn":"Europe/Tallinn"}]},ET:{n:"Ethiopia",z:[{"(GMT+03:00) Addis Ababa":"Africa/Addis_Ababa"}]},FK:{n:"Falkland Islands [Islas Malvinas]",z:[{"(GMT-03:00) Stanley":"Atlantic/Stanley"}]},FO:{n:"Faroe Islands",z:[{"(GMT+00:00) Faeroe":"Atlantic/Faeroe"}]},FJ:{n:"Fiji",
z:[{"(GMT+12:00) Fiji":"Pacific/Fiji"}]},FI:{n:"Finland",z:[{"(GMT+02:00) Helsinki":"Europe/Helsinki"}]},FR:{n:"France",z:[{"(GMT+01:00) Paris":"Europe/Paris"}]},GF:{n:"French Guiana",z:[{"(GMT-03:00) Cayenne":"America/Cayenne"}]},PF:{n:"French Polynesia",z:[{"(GMT-10:00) Tahiti":"Pacific/Tahiti"},{"(GMT-09:30) Marquesas":"Pacific/Marquesas"},{"(GMT-09:00) Gambier":"Pacific/Gambier"}]},TF:{n:"French Southern Territories",z:[{"(GMT+05:00) Kerguelen":"Indian/Kerguelen"}]},GA:{n:"Gabon",z:[{"(GMT+01:00) Libreville":"Africa/Libreville"}]},
GM:{n:"Gambia",z:[{"(GMT+00:00) Banjul":"Africa/Banjul"}]},GE:{n:"Georgia",z:[{"(GMT+04:00) Tbilisi":"Asia/Tbilisi"}]},DE:{n:"Germany",z:[{"(GMT+01:00) Berlin":"Europe/Berlin"}]},GH:{n:"Ghana",z:[{"(GMT+00:00) Accra":"Africa/Accra"}]},GI:{n:"Gibraltar",z:[{"(GMT+01:00) Gibraltar":"Europe/Gibraltar"}]},GR:{n:"Greece",z:[{"(GMT+02:00) Athens":"Europe/Athens"}]},GL:{n:"Greenland",z:[{"(GMT-04:00) Thule":"America/Thule"},{"(GMT-03:00) Godthab":"America/Godthab"},{"(GMT-01:00) Scoresbysund":"America/Scoresbysund"},
{"(GMT+00:00) Danmarkshavn":"America/Danmarkshavn"}]},GD:{n:"Grenada",z:[{"(GMT-04:00) Grenada":"America/Grenada"}]},GP:{n:"Guadeloupe",z:[{"(GMT-04:00) Guadeloupe":"America/Guadeloupe"}]},GU:{n:"Guam",z:[{"(GMT+10:00) Guam":"Pacific/Guam"}]},GT:{n:"Guatemala",z:[{"(GMT-06:00) Guatemala":"America/Guatemala"}]},GN:{n:"Guinea",z:[{"(GMT+00:00) Conakry":"Africa/Conakry"}]},GW:{n:"Guinea-Bissau",z:[{"(GMT+00:00) Bissau":"Africa/Bissau"}]},GY:{n:"Guyana",z:[{"(GMT-04:00) Guyana":"America/Guyana"}]},HT:{n:"Haiti",
z:[{"(GMT-05:00) Port-au-Prince":"America/Port-au-Prince"}]},HN:{n:"Honduras",z:[{"(GMT-06:00) Central Time - Tegucigalpa":"America/Tegucigalpa"}]},HK:{n:"Hong Kong",z:[{"(GMT+08:00) Hong Kong":"Asia/Hong_Kong"}]},HU:{n:"Hungary",z:[{"(GMT+01:00) Budapest":"Europe/Budapest"}]},IS:{n:"Iceland",z:[{"(GMT+00:00) Reykjavik":"Atlantic/Reykjavik"}]},IN:{n:"India",z:[{"(GMT+05:30) India Standard Time":"Asia/Calcutta"}]},ID:{n:"Indonesia",z:[{"(GMT+07:00) Jakarta":"Asia/Jakarta"},{"(GMT+08:00) Makassar":"Asia/Makassar"},
{"(GMT+09:00) Jayapura":"Asia/Jayapura"}]},IR:{n:"Iran",z:[{"(GMT+03:30) Tehran":"Asia/Tehran"}]},IQ:{n:"Iraq",z:[{"(GMT+03:00) Baghdad":"Asia/Baghdad"}]},IE:{n:"Ireland",z:[{"(GMT+00:00) Dublin":"Europe/Dublin"}]},IL:{n:"Israel",z:[{"(GMT+02:00) Jerusalem":"Asia/Jerusalem"}]},IT:{n:"Italy",z:[{"(GMT+01:00) Rome":"Europe/Rome"}]},JM:{n:"Jamaica",z:[{"(GMT-05:00) Jamaica":"America/Jamaica"}]},JP:{n:"Japan",z:[{"(GMT+09:00) Tokyo":"Asia/Tokyo"}]},JO:{n:"Jordan",z:[{"(GMT+02:00) Amman":"Asia/Amman"}]},
KZ:{n:"Kazakhstan",z:[{"(GMT+05:00) Aqtau":"Asia/Aqtau"},{"(GMT+05:00) Aqtobe":"Asia/Aqtobe"},{"(GMT+06:00) Almaty":"Asia/Almaty"}]},KE:{n:"Kenya",z:[{"(GMT+03:00) Nairobi":"Africa/Nairobi"}]},KI:{n:"Kiribati",z:[{"(GMT+12:00) Tarawa":"Pacific/Tarawa"},{"(GMT+13:00) Enderbury":"Pacific/Enderbury"},{"(GMT+14:00) Kiritimati":"Pacific/Kiritimati"}]},KW:{n:"Kuwait",z:[{"(GMT+03:00) Kuwait":"Asia/Kuwait"}]},KG:{n:"Kyrgyzstan",z:[{"(GMT+06:00) Bishkek":"Asia/Bishkek"}]},LA:{n:"Laos",z:[{"(GMT+07:00) Vientiane":"Asia/Vientiane"}]},
LV:{n:"Latvia",z:[{"(GMT+02:00) Riga":"Europe/Riga"}]},LB:{n:"Lebanon",z:[{"(GMT+02:00) Beirut":"Asia/Beirut"}]},LS:{n:"Lesotho",z:[{"(GMT+02:00) Maseru":"Africa/Maseru"}]},LR:{n:"Liberia",z:[{"(GMT+00:00) Monrovia":"Africa/Monrovia"}]},LY:{n:"Libya",z:[{"(GMT+02:00) Tripoli":"Africa/Tripoli"}]},LI:{n:"Liechtenstein",z:[{"(GMT+01:00) Vaduz":"Europe/Vaduz"}]},LT:{n:"Lithuania",z:[{"(GMT+02:00) Vilnius":"Europe/Vilnius"}]},LU:{n:"Luxembourg",z:[{"(GMT+01:00) Luxembourg":"Europe/Luxembourg"}]},MO:{n:"Macau",
z:[{"(GMT+08:00) Macau":"Asia/Macau"}]},MK:{n:"Macedonia [FYROM]",z:[{"(GMT+01:00) Central European Time - Belgrade":"Europe/Skopje"}]},MG:{n:"Madagascar",z:[{"(GMT+03:00) Antananarivo":"Indian/Antananarivo"}]},MW:{n:"Malawi",z:[{"(GMT+02:00) Blantyre":"Africa/Blantyre"}]},MY:{n:"Malaysia",z:[{"(GMT+08:00) Kuala Lumpur":"Asia/Kuala_Lumpur"}]},MV:{n:"Maldives",z:[{"(GMT+05:00) Maldives":"Indian/Maldives"}]},ML:{n:"Mali",z:[{"(GMT+00:00) Bamako":"Africa/Bamako"}]},MT:{n:"Malta",z:[{"(GMT+01:00) Malta":"Europe/Malta"}]},
MH:{n:"Marshall Islands",z:[{"(GMT+12:00) Kwajalein":"Pacific/Kwajalein"},{"(GMT+12:00) Majuro":"Pacific/Majuro"}]},MQ:{n:"Martinique",z:[{"(GMT-04:00) Martinique":"America/Martinique"}]},MR:{n:"Mauritania",z:[{"(GMT+00:00) Nouakchott":"Africa/Nouakchott"}]},MU:{n:"Mauritius",z:[{"(GMT+04:00) Mauritius":"Indian/Mauritius"}]},YT:{n:"Mayotte",z:[{"(GMT+03:00) Mayotte":"Indian/Mayotte"}]},MX:{n:"Mexico",z:[{"(GMT-07:00) Mountain Time - Hermosillo":"America/Hermosillo"},{"(GMT-08:00) Pacific Time - Tijuana":"America/Tijuana"},
{"(GMT-07:00) Mountain Time - Chihuahua, Mazatlan":"America/Mazatlan"},{"(GMT-06:00) Central Time - Mexico City":"America/Mexico_City"}]},FM:{n:"Micronesia",z:[{"(GMT+10:00) Truk":"Pacific/Truk"},{"(GMT+11:00) Kosrae":"Pacific/Kosrae"},{"(GMT+11:00) Ponape":"Pacific/Ponape"}]},MD:{n:"Moldova",z:[{"(GMT+02:00) Chisinau":"Europe/Chisinau"}]},MC:{n:"Monaco",z:[{"(GMT+01:00) Monaco":"Europe/Monaco"}]},MN:{n:"Mongolia",z:[{"(GMT+07:00) Hovd":"Asia/Hovd"},{"(GMT+08:00) Choibalsan":"Asia/Choibalsan"},{"(GMT+08:00) Ulaanbaatar":"Asia/Ulaanbaatar"}]},
MS:{n:"Montserrat",z:[{"(GMT-04:00) Montserrat":"America/Montserrat"}]},MA:{n:"Morocco",z:[{"(GMT+00:00) Casablanca":"Africa/Casablanca"}]},MZ:{n:"Mozambique",z:[{"(GMT+02:00) Maputo":"Africa/Maputo"}]},MM:{n:"Myanmar [Burma]",z:[{"(GMT+06:30) Rangoon":"Asia/Rangoon"}]},NA:{n:"Namibia",z:[{"(GMT+01:00) Windhoek":"Africa/Windhoek"}]},NR:{n:"Nauru",z:[{"(GMT+12:00) Nauru":"Pacific/Nauru"}]},NP:{n:"Nepal",z:[{"(GMT+05:45) Katmandu":"Asia/Katmandu"}]},NL:{n:"Netherlands",z:[{"(GMT+01:00) Amsterdam":"Europe/Amsterdam"}]},
NC:{n:"New Caledonia",z:[{"(GMT+11:00) Noumea":"Pacific/Noumea"}]},NZ:{n:"New Zealand",z:[{"(GMT+12:00) Auckland":"Pacific/Auckland"}]},NI:{n:"Nicaragua",z:[{"(GMT-06:00) Managua":"America/Managua"}]},NE:{n:"Niger",z:[{"(GMT+01:00) Niamey":"Africa/Niamey"}]},NG:{n:"Nigeria",z:[{"(GMT+01:00) Lagos":"Africa/Lagos"}]},NU:{n:"Niue",z:[{"(GMT-11:00) Niue":"Pacific/Niue"}]},NF:{n:"Norfolk Island",z:[{"(GMT+11:30) Norfolk":"Pacific/Norfolk"}]},KP:{n:"North Korea",z:[{"(GMT+09:00) Pyongyang":"Asia/Pyongyang"}]},
MP:{n:"Northern Mariana Islands",z:[{"(GMT+10:00) Saipan":"Pacific/Saipan"}]},NO:{n:"Norway",z:[{"(GMT+01:00) Oslo":"Europe/Oslo"}]},OM:{n:"Oman",z:[{"(GMT+04:00) Muscat":"Asia/Muscat"}]},PK:{n:"Pakistan",z:[{"(GMT+05:00) Karachi":"Asia/Karachi"}]},PW:{n:"Palau",z:[{"(GMT+09:00) Palau":"Pacific/Palau"}]},PS:{n:"Palestinian Territories",z:[{"(GMT+02:00) Gaza":"Asia/Gaza"}]},PA:{n:"Panama",z:[{"(GMT-05:00) Panama":"America/Panama"}]},PG:{n:"Papua New Guinea",z:[{"(GMT+10:00) Port Moresby":"Pacific/Port_Moresby"}]},
PY:{n:"Paraguay",z:[{"(GMT-04:00) Asuncion":"America/Asuncion"}]},PE:{n:"Peru",z:[{"(GMT-05:00) Lima":"America/Lima"}]},PH:{n:"Philippines",z:[{"(GMT+08:00) Manila":"Asia/Manila"}]},PN:{n:"Pitcairn Islands",z:[{"(GMT-08:00) Pitcairn":"Pacific/Pitcairn"}]},PL:{n:"Poland",z:[{"(GMT+01:00) Warsaw":"Europe/Warsaw"}]},PT:{n:"Portugal",z:[{"(GMT-01:00) Azores":"Atlantic/Azores"},{"(GMT+00:00) Lisbon":"Europe/Lisbon"}]},PR:{n:"Puerto Rico",z:[{"(GMT-04:00) Puerto Rico":"America/Puerto_Rico"}]},QA:{n:"Qatar",
z:[{"(GMT+03:00) Qatar":"Asia/Qatar"}]},RE:{n:"R\u00e9union",z:[{"(GMT+04:00) Reunion":"Indian/Reunion"}]},RO:{n:"Romania",z:[{"(GMT+02:00) Bucharest":"Europe/Bucharest"}]},RU:{n:"Russia",z:[{"(GMT+03:00) Moscow-01 - Kaliningrad":"Europe/Kaliningrad"},{"(GMT+04:00) Moscow+00":"Europe/Moscow"},{"(GMT+04:00) Moscow+00 - Samara":"Europe/Samara"},{"(GMT+06:00) Moscow+02 - Yekaterinburg":"Asia/Yekaterinburg"},{"(GMT+07:00) Moscow+03 - Omsk, Novosibirsk":"Asia/Omsk"},{"(GMT+08:00) Moscow+04 - Krasnoyarsk":"Asia/Krasnoyarsk"},
{"(GMT+09:00) Moscow+05 - Irkutsk":"Asia/Irkutsk"},{"(GMT+10:00) Moscow+06 - Yakutsk":"Asia/Yakutsk"},{"(GMT+11:00) Moscow+07 - Yuzhno-Sakhalinsk":"Asia/Vladivostok"},{"(GMT+12:00) Moscow+08 - Magadan":"Asia/Magadan"},{"(GMT+12:00) Moscow+08 - Petropavlovsk-Kamchatskiy":"Asia/Kamchatka"}]},RW:{n:"Rwanda",z:[{"(GMT+02:00) Kigali":"Africa/Kigali"}]},SH:{n:"Saint Helena",z:[{"(GMT+00:00) St Helena":"Atlantic/St_Helena"}]},KN:{n:"Saint Kitts and Nevis",z:[{"(GMT-04:00) St. Kitts":"America/St_Kitts"}]},
LC:{n:"Saint Lucia",z:[{"(GMT-04:00) St. Lucia":"America/St_Lucia"}]},PM:{n:"Saint Pierre and Miquelon",z:[{"(GMT-03:00) Miquelon":"America/Miquelon"}]},VC:{n:"Saint Vincent and the Grenadines",z:[{"(GMT-04:00) St. Vincent":"America/St_Vincent"}]},WS:{n:"Samoa",z:[{"(GMT+13:00) Apia":"Pacific/Apia"}]},SM:{n:"San Marino",z:[{"(GMT+01:00) Rome":"Europe/San_Marino"}]},ST:{n:"S\u00e3o Tom\u00e9 and Pr\u00edncipe",z:[{"(GMT+00:00) Sao Tome":"Africa/Sao_Tome"}]},SA:{n:"Saudi Arabia",z:[{"(GMT+03:00) Riyadh":"Asia/Riyadh"}]},
SN:{n:"Senegal",z:[{"(GMT+00:00) Dakar":"Africa/Dakar"}]},RS:{n:"Serbia",z:[{"(GMT+01:00) Central European Time - Belgrade":"Europe/Belgrade"}]},SC:{n:"Seychelles",z:[{"(GMT+04:00) Mahe":"Indian/Mahe"}]},SL:{n:"Sierra Leone",z:[{"(GMT+00:00) Freetown":"Africa/Freetown"}]},SG:{n:"Singapore",z:[{"(GMT+08:00) Singapore":"Asia/Singapore"}]},SK:{n:"Slovakia",z:[{"(GMT+01:00) Central European Time - Prague":"Europe/Bratislava"}]},SI:{n:"Slovenia",z:[{"(GMT+01:00) Central European Time - Belgrade":"Europe/Ljubljana"}]},
SB:{n:"Solomon Islands",z:[{"(GMT+11:00) Guadalcanal":"Pacific/Guadalcanal"}]},SO:{n:"Somalia",z:[{"(GMT+03:00) Mogadishu":"Africa/Mogadishu"}]},ZA:{n:"South Africa",z:[{"(GMT+02:00) Johannesburg":"Africa/Johannesburg"}]},GS:{n:"South Georgia and the South Sandwich Islands",z:[{"(GMT-02:00) South Georgia":"Atlantic/South_Georgia"}]},KR:{n:"South Korea",z:[{"(GMT+09:00) Seoul":"Asia/Seoul"}]},ES:{n:"Spain",z:[{"(GMT+00:00) Canary Islands":"Atlantic/Canary"},{"(GMT+01:00) Ceuta":"Africa/Ceuta"},{"(GMT+01:00) Madrid":"Europe/Madrid"}]},
LK:{n:"Sri Lanka",z:[{"(GMT+05:30) Colombo":"Asia/Colombo"}]},SD:{n:"Sudan",z:[{"(GMT+03:00) Khartoum":"Africa/Khartoum"}]},SR:{n:"Suriname",z:[{"(GMT-03:00) Paramaribo":"America/Paramaribo"}]},SJ:{n:"Svalbard and Jan Mayen",z:[{"(GMT+01:00) Oslo":"Arctic/Longyearbyen"}]},SZ:{n:"Swaziland",z:[{"(GMT+02:00) Mbabane":"Africa/Mbabane"}]},SE:{n:"Sweden",z:[{"(GMT+01:00) Stockholm":"Europe/Stockholm"}]},CH:{n:"Switzerland",z:[{"(GMT+01:00) Zurich":"Europe/Zurich"}]},SY:{n:"Syria",z:[{"(GMT+02:00) Damascus":"Asia/Damascus"}]},
TW:{n:"Taiwan",z:[{"(GMT+08:00) Taipei":"Asia/Taipei"}]},TJ:{n:"Tajikistan",z:[{"(GMT+05:00) Dushanbe":"Asia/Dushanbe"}]},TZ:{n:"Tanzania",z:[{"(GMT+03:00) Dar es Salaam":"Africa/Dar_es_Salaam"}]},TH:{n:"Thailand",z:[{"(GMT+07:00) Bangkok":"Asia/Bangkok"}]},TL:{n:"Timor-Leste",z:[{"(GMT+09:00) Dili":"Asia/Dili"}]},TG:{n:"Togo",z:[{"(GMT+00:00) Lome":"Africa/Lome"}]},TK:{n:"Tokelau",z:[{"(GMT+14:00) Fakaofo":"Pacific/Fakaofo"}]},TO:{n:"Tonga",z:[{"(GMT+13:00) Tongatapu":"Pacific/Tongatapu"}]},TT:{n:"Trinidad and Tobago",
z:[{"(GMT-04:00) Port of Spain":"America/Port_of_Spain"}]},TN:{n:"Tunisia",z:[{"(GMT+01:00) Tunis":"Africa/Tunis"}]},TR:{n:"Turkey",z:[{"(GMT+02:00) Istanbul":"Europe/Istanbul"}]},TM:{n:"Turkmenistan",z:[{"(GMT+05:00) Ashgabat":"Asia/Ashgabat"}]},TC:{n:"Turks and Caicos Islands",z:[{"(GMT-05:00) Grand Turk":"America/Grand_Turk"}]},TV:{n:"Tuvalu",z:[{"(GMT+12:00) Funafuti":"Pacific/Funafuti"}]},UM:{n:"U.S. Minor Outlying Islands",z:[{"(GMT-11:00) Midway":"Pacific/Midway"},{"(GMT-10:00) Johnston":"Pacific/Johnston"},
{"(GMT+12:00) Wake":"Pacific/Wake"}]},VI:{n:"U.S. Virgin Islands",z:[{"(GMT-04:00) St. Thomas":"America/St_Thomas"}]},UG:{n:"Uganda",z:[{"(GMT+03:00) Kampala":"Africa/Kampala"}]},UA:{n:"Ukraine",z:[{"(GMT+02:00) Kiev":"Europe/Kiev"}]},AE:{n:"United Arab Emirates",z:[{"(GMT+04:00) Dubai":"Asia/Dubai"}]},GB:{n:"United Kingdom",z:[{"(GMT+00:00) GMT (no daylight saving)":"Etc/GMT"},{"(GMT+00:00) London":"Europe/London"}]},US:{n:"United States",z:[{"(GMT-10:00) Hawaii Time":"Pacific/Honolulu"},{"(GMT-09:00) Alaska Time":"America/Anchorage"},
{"(GMT-07:00) Mountain Time - Arizona":"America/Phoenix"},{"(GMT-08:00) Pacific Time":"America/Los_Angeles"},{"(GMT-07:00) Mountain Time":"America/Denver"},{"(GMT-06:00) Central Time":"America/Chicago"},{"(GMT-05:00) Eastern Time":"America/New_York"}]},UY:{n:"Uruguay",z:[{"(GMT-03:00) Montevideo":"America/Montevideo"}]},UZ:{n:"Uzbekistan",z:[{"(GMT+05:00) Tashkent":"Asia/Tashkent"}]},VU:{n:"Vanuatu",z:[{"(GMT+11:00) Efate":"Pacific/Efate"}]},VA:{n:"Vatican City",z:[{"(GMT+01:00) Rome":"Europe/Vatican"}]},
VE:{n:"Venezuela",z:[{"(GMT-04:30) Caracas":"America/Caracas"}]},VN:{n:"Vietnam",z:[{"(GMT+07:00) Hanoi":"Asia/Saigon"}]},WF:{n:"Wallis and Futuna",z:[{"(GMT+12:00) Wallis":"Pacific/Wallis"}]},EH:{n:"Western Sahara",z:[{"(GMT+00:00) El Aaiun":"Africa/El_Aaiun"}]},YE:{n:"Yemen",z:[{"(GMT+03:00) Aden":"Asia/Aden"}]},ZM:{n:"Zambia",z:[{"(GMT+02:00) Lusaka":"Africa/Lusaka"}]},ZW:{n:"Zimbabwe",z:[{"(GMT+02:00) Harare":"Africa/Harare"}]}},f=countlyCommon.ACTIVE_APP_ID;$("#app-management-bar .app-container").removeClass("active");
$("#app-management-bar .app-container[data-id='"+f+"']").addClass("active");c(f);a("#app-add-timezone");$("#clear-app-data").click(function(){CountlyHelpers.confirm(jQuery.i18n.map["management-applications.clear-confirm"],"red",function(b){if(!b)return!0;b=$("#app-edit-id").val();$.ajax({type:"GET",url:countlyCommon.API_PARTS.apps.w+"/reset",data:{args:JSON.stringify({app_id:b}),api_key:countlyGlobal.member.api_key},dataType:"jsonp",success:function(b){if(b)countlySession.reset(),countlyLocation.reset(),
countlyCity.reset(),countlyUser.reset(),countlyDevice.reset(),countlyCarrier.reset(),countlyDeviceDetails.reset(),countlyAppVersion.reset(),countlyEvent.reset(),CountlyHelpers.alert(jQuery.i18n.map["management-applications.clear-success"],"black");else return CountlyHelpers.alert(jQuery.i18n.map["management-applications.clear-admin"],"red"),!1}})})});$("#delete-app").click(function(){CountlyHelpers.confirm(jQuery.i18n.map["management-applications.delete-confirm"],"red",function(b){if(!b)return!0;
var a=$("#app-edit-id").val();$.ajax({type:"GET",url:countlyCommon.API_PARTS.apps.w+"/delete",data:{args:JSON.stringify({app_id:a}),api_key:countlyGlobal.member.api_key},dataType:"jsonp",success:function(){delete countlyGlobal.apps[a];delete countlyGlobal.admin_apps[a];var b=$(".app-container").filter(function(){return $(this).data("id")&&$(this).data("id")==a}),d=b.prev().length?b.prev():b.next();c(d.data("id"));b.fadeOut("slow").remove();_.isEmpty(countlyGlobal.apps)&&($("#new-install-overlay").show(),
$("#sidebar-app-select .logo").css("background-image",""),$("#sidebar-app-select .text").text(""))},error:function(){CountlyHelpers.alert(jQuery.i18n.map["management-applications.delete-admin"],"red")}})})});$("#edit-app").click(function(){$(".table-edit").is(":visible")?d():($(".edit").show(),$("#edit-app").addClass("active"),$(".read").hide(),$(".table-edit").show())});$("#save-app-edit").click(function(){if($(this).hasClass("disabled"))return!1;var b=$("#app-edit-id").val(),a=$("#app-edit-name .edit input").val();
$(".required").fadeOut().remove();var f=$("<span>").addClass("required").text("*");a||$("#app-edit-name .edit input").after(f.clone());if($(".required").length)return $(".required").fadeIn(),!1;var e=$("#add-edit-image-form").find("#app_image").val().split(".").pop().toLowerCase();if(e&&-1==$.inArray(e,["gif","png","jpg","jpeg"]))return CountlyHelpers.alert(jQuery.i18n.map["management-applications.icon-error"],"red"),!1;$(this).addClass("disabled");$.ajax({type:"GET",url:countlyCommon.API_PARTS.apps.w+
"/update",data:{args:JSON.stringify({app_id:b,name:a,category:$("#app-edit-category .cly-select .text").data("value")+"",timezone:$("#app-edit-timezone #app-timezone").val(),country:$("#app-edit-timezone #app-country").val()}),api_key:countlyGlobal.member.api_key},dataType:"jsonp",success:function(f){for(var g in f)countlyGlobal.apps[b][g]=f[g],countlyGlobal.admin_apps[b][g]=f[g];if(!e)return $("#save-app-edit").removeClass("disabled"),c(b),d(),$(".app-container").filter(function(){return $(this).data("id")&&
$(this).data("id")==b}).find(".name").text(a),-1!==$("#sidebar-app-select .logo").attr("style").indexOf(b)&&$("#sidebar-app-select .text").text(a),!0;$("#add-edit-image-form").find("#app_image_id").val(b);$("#add-edit-image-form").ajaxSubmit({resetForm:!0,beforeSubmit:function(b){b.push({name:"_csrf",value:countlyGlobal.csrf_token})},success:function(f){$("#save-app-edit").removeClass("disabled");var e=$(".app-container").filter(function(){return $(this).data("id")&&$(this).data("id")==b});f?(e.find(".logo").css({"background-image":"url("+
f+"?v"+(new Date).getTime()+")"}),$("#sidebar-app-select .logo").css("background-image",$("#sidebar-app-select .logo").css("background-image").replace(")","")+"?v"+(new Date).getTime()+")")):CountlyHelpers.alert(jQuery.i18n.map["management-applications.icon-error"],"red");c(b);d();e.find(".name").text(a)}})}})});$("#cancel-app-edit").click(function(){d();var b=$("#app-edit-id").val();c(b)});$(".app-container:not(#app-container-new)").live("click",function(){var b=$(this).data("id");d();$(".app-container").removeClass("active");
$(this).addClass("active");c(b)});$("#add-app-button").click(function(){b()});$("#cancel-app-add").click(function(){$("#app-container-new").remove();$("#add-new-app").hide();$("#view-app").show();$(".new-app-name").text(jQuery.i18n.map["management-applications.my-new-app"]);e()});$("#app-add-name").keyup(function(){var b=$(this).val();$("#app-container-new .name").text(b);$(".new-app-name").text(b)});$("#save-app-add").click(function(){if($(this).hasClass("disabled"))return!1;var b=$("#app-add-name").val(),
a=$("#app-add-category").data("value")+"",d=$("#app-add-timezone #app-timezone").val(),f=$("#app-add-timezone #app-country").val();$(".required").fadeOut().remove();var e=$("<span>").addClass("required").text("*");b||$("#app-add-name").after(e.clone());a||$("#app-add-category").parents(".cly-select").after(e.clone());d||$("#app-add-timezone #app-timezone").after(e.clone());if($(".required").length)return $(".required").fadeIn(),!1;var g=$("#add-app-image-form").find("#app_image").val().split(".").pop().toLowerCase();
if(g&&-1==$.inArray(g,["gif","png","jpg","jpeg"]))return CountlyHelpers.alert(jQuery.i18n.map["management-applications.icon-error"],"red"),!1;$(this).addClass("disabled");$.ajax({type:"GET",url:countlyCommon.API_PARTS.apps.w+"/create",data:{args:JSON.stringify({name:b,category:a,timezone:d,country:f}),api_key:countlyGlobal.member.api_key},dataType:"jsonp",success:function(b){var a=$("#sidebar-new-app>div").clone(),d={_id:b._id,name:b.name,key:b.key,category:b.category,timezone:b.timezone,country:b.country};
countlyGlobal.apps[b._id]=d;countlyGlobal.admin_apps[b._id]=d;var f=$("#app-container-new");f.data("id",b._id);f.data("key",b.key);f.removeAttr("id");if(!g)return $("#save-app-add").removeClass("disabled"),a.find(".name").text(b.name),a.data("id",b._id),a.data("key",b.key),$("#app-nav .apps-scrollable").append(a),c(b._id),!0;$("#add-app-image-form").find("#app_image_id").val(b._id);$("#add-app-image-form").ajaxSubmit({resetForm:!0,beforeSubmit:function(b){b.push({name:"_csrf",value:countlyGlobal.csrf_token})},
success:function(d){$("#save-app-add").removeClass("disabled");d?(f.find(".logo").css({"background-image":"url("+d+")"}),a.find(".logo").css({"background-image":"url("+d+")"})):CountlyHelpers.alert(jQuery.i18n.map["management-applications.icon-error"],"red");a.find(".name").text(b.name);a.data("id",b._id);a.data("key",b.key);$("#app-nav .apps-scrollable").append(a);c(b._id)}})}})})}});
window.ManageUsersView=countlyView.extend({template:null,initialize:function(){var c=this;T.render("templates/users",function(a){c.template=a})},renderCommon:function(){var c=this;$.ajax({url:countlyCommon.API_PARTS.users.r+"/all",data:{api_key:countlyGlobal.member.api_key},dataType:"jsonp",success:function(a){$("#content").html(c.template({users:a,apps:countlyGlobal.apps}))}})}});
window.EventsView=countlyView.extend({showOnGraph:2,beforeRender:function(){},initialize:function(){this.template=Handlebars.compile($("#template-events").html())},pageScript:function(){$(".event-container").unbind("click");$(".segmentation-option").unbind("click");$(".big-numbers").unbind("click");var c=this;$(".event-container").on("click",function(){var a=$(this).data("key");c.showOnGraph=2;$(".event-container").removeClass("active");$(this).addClass("active");countlyEvent.setActiveEvent(a,function(){c.refresh(!0)})});
$("#event-nav .event-container").mouseenter(function(){var a=$(this),c=a.find(".name");c[0].scrollWidth>c.innerWidth()&&($("#event-tooltip").html(a.clone()),$("#event-tooltip .event-container").removeClass("active"),$("#event-tooltip").css(a.offset()),$("#event-tooltip .name").css({width:"auto"}),$("#event-tooltip").show(),$("#event-tooltip").bind("click",function(){a.trigger("click")}))});$("#event-tooltip").mouseleave(function(){$("#event-tooltip").is(":visible")&&($("#event-tooltip").hide(),$("#event-tooltip").unbind("click"))});
$(".segmentation-option").on("click",function(){var a=$(this).data("value");countlyEvent.setActiveSegmentation(a,function(){c.renderCommon(!0);newPage=$("<div>"+c.template(c.templateData)+"</div>");$(c.el).find("#event-nav .scrollable").html(function(){return newPage.find("#event-nav .scrollable").html()});$(c.el).find(".widget-footer").html(newPage.find(".widget-footer").html());$(c.el).find("#edit-event-container").replaceWith(newPage.find("#edit-event-container"));var a=countlyEvent.getEventData();
c.drawGraph(a);c.pageScript();c.drawTable(a);app.localize()})});$(".big-numbers").on("click",function(){if(2==$(".big-numbers.selected").length)c.showOnGraph=1-$(this).index();else if(1==$(".big-numbers.selected").length){if($(this).hasClass("selected"))return!0;c.showOnGraph=2}$(this).toggleClass("selected");c.drawGraph(countlyEvent.getEventData())});countlyGlobal.admin_apps[countlyCommon.ACTIVE_APP_ID]&&$("#edit-events-button").show()},drawGraph:function(c){2!=this.showOnGraph?($(".big-numbers").removeClass("selected"),
$(".big-numbers").eq(this.showOnGraph).addClass("selected"),2==c.dataLevel?c.chartDP.dp=c.chartDP.dp.slice(this.showOnGraph,this.showOnGraph+1):c.chartDP=c.chartDP.slice(this.showOnGraph,this.showOnGraph+1)):$(".big-numbers").addClass("selected");2==c.dataLevel?countlyCommon.drawGraph(c.chartDP,"#dashboard-graph","bar",{series:{stack:null}}):countlyCommon.drawTimeGraph(c.chartDP,"#dashboard-graph")},drawTable:function(c){this.dtable&&this.dtable.fnDestroy&&this.dtable.fnDestroy(!0);$("#event-main").append('<table class="d-table" cellpadding="0" cellspacing="0"></table>');
var a=[];countlyEvent.isSegmentedView()?a.push({mData:"curr_segment",sTitle:jQuery.i18n.map["events.table.segmentation"]}):a.push({mData:"date",sType:"customDate",sTitle:jQuery.i18n.map["common.date"]});a.push({mData:"c",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:c.tableColumns[1]});c.tableColumns[2]&&a.push({mData:"s",sType:"formatted-num",mRender:function(a){return countlyCommon.formatNumber(a)},sTitle:c.tableColumns[2]});this.dtable=$(".d-table").dataTable($.extend({},
$.fn.dataTable.defaults,{aaData:c.chartData,aoColumns:a}));$(".d-table").stickyTableHeaders()},getColumnCount:function(){return $(".dataTable").find("thead th").length},renderCommon:function(c){var a=countlyEvent.getEventData(),d=countlyEvent.getEventSummary(),e=this;this.templateData={"page-title":a.eventName.toUpperCase(),"logo-class":"events",events:countlyEvent.getEvents(),"event-map":countlyEvent.getEventMap(),segmentations:countlyEvent.getEventSegmentations(),"active-segmentation":countlyEvent.getActiveSegmentation(),
"big-numbers":d,"chart-data":{columnCount:a.tableColumns.length,columns:a.tableColumns,rows:a.chartData}};if(0==countlyEvent.getEvents().length)return window.location="dashboard#/",CountlyHelpers.alert(jQuery.i18n.map["events.no-event"],"black"),!0;c||($(this.el).html(this.template(this.templateData)),this.drawGraph(a),this.drawTable(a),this.pageScript(),$("#edit-events-button").on("click",function(){CountlyHelpers.popup("#edit-event-container","events");$(".dialog #edit-event-table-container").slimScroll({height:"100%",
start:"top",wheelStep:10,position:"right",disableFadeOut:!0});$(".dialog .events-table").sortable({items:"tr",revert:!0,handle:"td:first-child",helper:function(b,a){a.children().each(function(){$(this).width($(this).width())});a.addClass("moving");return a},cursor:"move",containment:"parent",tolerance:"pointer",placeholder:"event-row-placeholder",stop:function(b,a){a.item.removeClass("moving")}});$(".dialog #events-save").on("click",function(){var b={},a=[];$(".dialog .events-table tbody tr").each(function(){var a=
$(this);eventKey=a.find(".event-key").text();a.find(".event-name").val()&&(b[eventKey]||(b[eventKey]={}),b[eventKey].name=a.find(".event-name").val());a.find(".event-count").val()&&(b[eventKey]||(b[eventKey]={}),b[eventKey].count=a.find(".event-count").val());a.find(".event-sum").val()&&(b[eventKey]||(b[eventKey]={}),b[eventKey].sum=a.find(".event-sum").val())});$(".dialog .events-table").find(".event-key").each(function(){$(this).text()&&a.push($(this).text())});$.ajax({type:"POST",url:countlyGlobal.path+
"/events/map/edit",data:{app_id:countlyCommon.ACTIVE_APP_ID,event_map:b,event_order:a,_csrf:countlyGlobal.csrf_token},success:function(){e.refresh()}})});$(".delete-event").on("click",function(){var b=$(this).data("event-key");b&&CountlyHelpers.confirm(jQuery.i18n.prop("events.delete-confirm",b),"red",function(a){a&&$.ajax({type:"POST",url:countlyGlobal.path+"/events/delete",data:{event_key:b,app_id:countlyCommon.ACTIVE_APP_ID,_csrf:countlyGlobal.csrf_token},success:function(){countlyEvent.reset();
$.when(countlyEvent.initialize(!0)).then(function(){e.render()})}})})})}))},refresh:function(c,a){var d=this;$.when(countlyEvent.initialize(c)).then(function(){if(app.activeView!=d)return!1;d.renderCommon(!0);newPage=$("<div>"+d.template(d.templateData)+"</div>");$(d.el).find("#event-nav .scrollable").html(function(){return newPage.find("#event-nav .scrollable").html()});a||($("#event-update-area .cly-select").length&&!c?($(d.el).find("#event-update-area .select-items").html(function(){return newPage.find("#event-update-area .select-items").html()}),
$("#event-update-area .select-items>div").addClass("scroll-list"),$("#event-update-area .select-items").find(".scroll-list").slimScroll({height:"100%",start:"top",wheelStep:10,position:"right",disableFadeOut:!0}),$(".select-items .item").click(function(){var b=$(this).parents(".cly-select").find(".text");b.text($(this).text());b.data("value",$(this).data("value"))})):$(d.el).find("#event-update-area").replaceWith(newPage.find("#event-update-area")));$(d.el).find(".widget-footer").html(newPage.find(".widget-footer").html());
$(d.el).find("#edit-event-container").replaceWith(newPage.find("#edit-event-container"));var e=countlyEvent.getEventData();d.drawGraph(e);d.pageScript();c||a?d.drawTable(e):d.getColumnCount()!=e.tableColumns.length?d.drawTable(e):CountlyHelpers.refreshTable(d.dtable,e.chartData);app.localize()})}});
var AppRouter=Backbone.Router.extend({routes:{"/":"dashboard","/analytics/sessions":"sessions","/analytics/countries":"countries","/analytics/users":"users","/analytics/loyalty":"loyalty","/analytics/devices":"devices","/analytics/platforms":"platforms","/analytics/versions":"versions","/analytics/carriers":"carriers","/analytics/frequency":"frequency","/analytics/events":"events","/analytics/resolutions":"resolutions","/analytics/durations":"durations","/all":"allapps","/manage/apps":"manageApps",
"/manage/users":"manageUsers","*path":"main"},activeView:null,dateToSelected:null,dateFromSelected:null,activeAppName:"",activeAppKey:"",main:function(){this.navigate("/",!0)},dashboard:function(){this.renderWhenReady(this.dashboardView)},sessions:function(){this.renderWhenReady(this.sessionView)},countries:function(){this.renderWhenReady(this.countriesView)},devices:function(){this.renderWhenReady(this.deviceView)},platforms:function(){this.renderWhenReady(this.platformView)},versions:function(){this.renderWhenReady(this.appVersionView)},
users:function(){this.renderWhenReady(this.userView)},allapps:function(){this.renderWhenReady(this.allAppsView)},loyalty:function(){this.renderWhenReady(this.loyaltyView)},frequency:function(){this.renderWhenReady(this.frequencyView)},carriers:function(){this.renderWhenReady(this.carrierView)},manageApps:function(){this.renderWhenReady(this.manageAppsView)},manageUsers:function(){this.renderWhenReady(this.manageUsersView)},events:function(){this.renderWhenReady(this.eventsView)},resolutions:function(){this.renderWhenReady(this.resolutionsView)},
durations:function(){this.renderWhenReady(this.durationsView)},refreshActiveView:function(){},renderWhenReady:function(c){this.activeView&&this.activeView.destroy();this.activeView=c;clearInterval(this.refreshActiveView);if(_.isEmpty(countlyGlobal.apps))return"/manage/apps"!=Backbone.history.fragment?this.navigate("/manage/apps",!0):c.render(),!1;c.render();var a=this;this.refreshActiveView=setInterval(function(){a.activeView.refresh();if(a.refreshScripts[Backbone.history.fragment])for(var c=0,e=
a.refreshScripts[Backbone.history.fragment].length;c<e;c++)a.refreshScripts[Backbone.history.fragment][c]();if(a.refreshScripts["#"]){c=0;for(e=a.refreshScripts["#"].length;c<e;c++)a.refreshScripts["#"][c]()}},countlyCommon.DASHBOARD_REFRESH_MS)},initialize:function(){function c(b){if(-1!=b.indexOf(":"))return-1!=b.indexOf(",")?(b=b.replace(/,|:/g,""),b=b.split(" "),parseInt(1E6*(moment.monthsShort.indexOf(b[1])+1))+1E4*parseInt(b[0])+parseInt(b[2])):parseInt(b.replace(":",""));if(3==b.length)return moment.monthsShort.indexOf(b);
b=b.replace(",","");b=b.split(" ");return 3==b.length?1E4*parseInt(b[2])+parseInt(100*moment.monthsShort.indexOf(b[1]))+parseInt(b[0]):parseInt(100*moment.monthsShort.indexOf(b[1]))+parseInt(b[0])}function a(b){var b=b.split("-")[0],a="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");if(-1!=b.indexOf(":")){var c=b.split(" ")[1].split(",")[0];return b.replace(c,parseInt(a.indexOf(c))).replace(/[:, ]/g,"")}b=b.split(" ");return 1<b.length?parseInt(100*a.indexOf(b[1]))+parseInt(b[0]):b[0].replace(/[><]/g,
"")}this.pageScripts={};this.refreshScripts={};this.dashboardView=new DashboardView;this.sessionView=new SessionView;this.countriesView=new CountriesView;this.userView=new UserView;this.allAppsView=new AllAppsView;this.loyaltyView=new LoyaltyView;this.deviceView=new DeviceView;this.platformView=new PlatformView;this.appVersionView=new AppVersionView;this.frequencyView=new FrequencyView;this.carrierView=new CarrierView;this.manageAppsView=new ManageAppsView;this.manageUsersView=new ManageUsersView;
this.eventsView=new EventsView;this.resolutionsView=new ResolutionView;this.durationsView=new DurationView;Handlebars.registerPartial("date-selector",$("#template-date-selector").html());Handlebars.registerPartial("timezones",$("#template-timezones").html());Handlebars.registerPartial("app-categories",$("#template-app-categories").html());Handlebars.registerHelper("eachOfObject",function(b,a){var c="",d;for(d in b)c+=a.fn({property:d,value:b[d]});return c});Handlebars.registerHelper("eachOfObjectValue",
function(b,a){var c="",d;for(d in b)c+=a.fn(b[d]);return c});Handlebars.registerHelper("eachOfArray",function(b,a){for(var c="",d=0;d<b.length;d++)c+=a.fn({value:b[d]});return c});Handlebars.registerHelper("prettyJSON",function(b){return JSON.stringify(b,void 0,4)});Handlebars.registerHelper("getShortNumber",function(b){return countlyCommon.getShortNumber(b)});Handlebars.registerHelper("getFormattedNumber",function(b){if(isNaN(b))return b;ret=parseFloat(parseFloat(b).toFixed(2).toString()).toString();
return ret.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")});Handlebars.registerHelper("toUpperCase",function(b){return b.toUpperCase()});Handlebars.registerHelper("appIdsToNames",function(b){return CountlyHelpers.appIdsToNames(b)});Handlebars.registerHelper("forNumberOfTimes",function(b,a){for(var c="",d=0;d<b;d++)c+=a.fn({count:d+1});return c});Handlebars.registerHelper("include",function(b,a){var c=Handlebars.partials[b],d=$.extend({},this,a.hash);return c(d)});Handlebars.registerHelper("for",function(b,
a,c,d){for(var e="";b<a;b+=c)e+=d.fn(b);return e});Handlebars.registerHelper("ifCond",function(b,a,c,d){switch(a){case "==":return b==c?d.fn(this):d.inverse(this);case "===":return b===c?d.fn(this):d.inverse(this);case "<":return b<c?d.fn(this):d.inverse(this);case "<=":return b<=c?d.fn(this):d.inverse(this);case ">":return b>c?d.fn(this):d.inverse(this);case ">=":return b>=c?d.fn(this):d.inverse(this);case "&&":return b&&c?d.fn(this):d.inverse(this);case "||":return b||c?d.fn(this):d.inverse(this);
default:return d.inverse(this)}});jQuery.i18n.properties({name:"help",cache:!0,language:countlyCommon.BROWSER_LANG_SHORT,path:[countlyGlobal.cdn+"localization/help/"],mode:"map",callback:function(){countlyCommon.HELP_MAP=jQuery.i18n.map;jQuery.i18n.map={};var b=["dashboard"],a=[countlyGlobal.cdn+"localization/dashboard/"];if(countlyGlobal.plugins)for(var c=0,d=countlyGlobal.plugins.length;c<d;c++)b.push(countlyGlobal.plugins[c]),a.push(countlyGlobal.cdn+countlyGlobal.plugins[c]+"/localization/");
jQuery.i18n.properties({name:b,cache:!0,language:countlyCommon.BROWSER_LANG_SHORT,path:a,mode:"map"})}});var d=this;$(document).ready(function(){CountlyHelpers.initializeSelect();CountlyHelpers.initializeTextSelect();CountlyHelpers.initializeHugeDropdown();var b=countlyCommon.getPeriod();"[object Array]"===Object.prototype.toString.call(b)&&2==b.length&&(d.dateFromSelected=countlyCommon.getPeriod()[0],d.dateToSelected=countlyCommon.getPeriod()[1]);try{moment.lang(countlyCommon.BROWSER_LANG_SHORT)}catch(a){moment.lang("en")}$(".reveal-language-menu").text(countlyCommon.BROWSER_LANG_SHORT.toUpperCase());
$(".apps-scrollable").sortable({items:".app-container.app-navigate",revert:!0,forcePlaceholderSize:!0,handle:".drag",containment:"parent",tolerance:"pointer",stop:function(){var b=[];$(".app-container.app-navigate").each(function(){$(this).data("id")&&b.push($(this).data("id"))});$.ajax({type:"POST",url:countlyGlobal.path+"/dashboard/settings",data:{app_sort_list:b,_csrf:countlyGlobal.csrf_token},success:function(){}})}});$("#sort-app-button").click(function(){$(".app-container.app-navigate .drag").fadeToggle()});
$(".app-navigate").live("click",function(){var b=$(this).data("key"),a=$(this).data("id"),c=$(this).find(".name").text(),e=$(this).find(".logo").css("background-image"),g=$("#sidebar-app-select");if("allapps"==a)return window.location.hash="/all",g.removeClass("active"),$("#app-nav").animate({left:"31px"},{duration:500,easing:"easeInBack"}),d.activeAppKey=b,!1;$("#sidebar-menu > .item").removeClass("hide");$("#allapps-menu").css("display","none");"#/all"==window.location.hash.toString()&&(window.location.hash=
"/");if(d.activeAppKey==b)return g.removeClass("active"),$("#app-nav").animate({left:"31px"},{duration:500,easing:"easeInBack"}),!1;d.activeAppName=c;d.activeAppKey=b;$("#app-nav").animate({left:"31px"},{duration:500,easing:"easeInBack",complete:function(){countlyCommon.setActiveApp(a);g.find(".text").text(c);g.find(".logo").css("background-image",e);g.removeClass("active");d.activeView.appChanged()}})});$("#sidebar-events").click(function(b){$.when(countlyEvent.refreshEvents()).then(function(){0==
countlyEvent.getEvents().length&&(CountlyHelpers.alert(jQuery.i18n.map["events.no-event"],"black"),b.stopImmediatePropagation(),b.preventDefault())})});$("#sidebar-menu").on("click",".item",function(){var b=$(this).next(),a=$(this).hasClass("active");b.hasClass("sidebar-submenu")&&!a?b.slideToggle():($("#sidebar-menu>.item").removeClass("active"),$(this).addClass("active"),201==$("#app-nav").offset().left&&($("#app-nav").animate({left:"31px"},{duration:500,easing:"easeInBack"}),$("#sidebar-app-select").removeClass("active")))});
$("#sidebar-menu").slimScroll({height:$(window).height()-123-46+"px",railVisible:!0,railColor:"#4CC04F",railOpacity:0.2,color:"#4CC04F"});$(window).resize(function(){$("#sidebar-menu").slimScroll({height:$(window).height()-123-46+"px"})});$(".sidebar-submenu").on("click",".item",function(){if($(this).hasClass("disabled"))return!0;201==$("#app-nav").offset().left&&($("#app-nav").animate({left:"31px"},{duration:500,easing:"easeInBack"}),$("#sidebar-app-select").removeClass("active"));$(".sidebar-submenu .item").removeClass("active");
$(this).addClass("active");$(this).parent().prev(".item").addClass("active")});$("#sidebar-app-select").click(function(){if($(this).hasClass("disabled"))return!0;$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active");$("#app-nav").show();201==$("#app-nav").offset().left?$("#app-nav").animate({left:"31px"},{duration:500,easing:"easeInBack"}):$("#app-nav").animate({left:"201px"},{duration:500,easing:"easeOutBack"})});$("#sidebar-bottom-container .reveal-menu").click(function(){$("#language-menu").hide();
$("#sidebar-bottom-container .menu").toggle()});$("#sidebar-bottom-container .reveal-language-menu").click(function(){$("#sidebar-bottom-container .menu").hide();$("#language-menu").toggle()});$("#sidebar-bottom-container .item").click(function(){$("#sidebar-bottom-container .menu").hide();$("#language-menu").hide()});$("#language-menu .item").click(function(){var b=$(this).data("language-code"),a=b.toUpperCase();store.set("countly_lang",b);$(".reveal-language-menu").text(a);countlyCommon.BROWSER_LANG_SHORT=
b;countlyCommon.BROWSER_LANG=b;try{moment.lang(countlyCommon.BROWSER_LANG_SHORT)}catch(c){moment.lang("en")}$("#date-to").datepicker("option",$.datepicker.regional[countlyCommon.BROWSER_LANG]);$("#date-from").datepicker("option",$.datepicker.regional[countlyCommon.BROWSER_LANG]);jQuery.i18n.properties({name:"help",cache:!0,language:countlyCommon.BROWSER_LANG_SHORT,path:[countlyGlobal.cdn+"localization/help/"],mode:"map",callback:function(){countlyCommon.HELP_MAP=jQuery.i18n.map;jQuery.i18n.map={};
var b=["dashboard"],a=[countlyGlobal.cdn+"localization/dashboard/"];if(countlyGlobal.plugins)for(var c=0,e=countlyGlobal.plugins.length;c<e;c++)b.push(countlyGlobal.plugins[c]),a.push(countlyGlobal.cdn+countlyGlobal.plugins[c]+"/localization/");jQuery.i18n.properties({name:b,cache:!0,language:countlyCommon.BROWSER_LANG_SHORT,path:a,mode:"map",callback:function(){$.when(countlyLocation.changeLanguage()).then(function(){d.activeView.render();d.pageScript()})}})}})});$("#account-settings").click(function(){CountlyHelpers.popup("#edit-account-details");
$(".dialog #username").val($("#menu-username").text());$(".dialog #api-key").val($("#user-api-key").val())});$("#save-account-details:not(.disabled)").live("click",function(){var b=$(".dialog #username").val(),a=$(".dialog #old_pwd").val(),c=$(".dialog #new_pwd").val(),d=$(".dialog #re_new_pwd").val();if(c!=d)return $(".dialog #settings-save-result").addClass("red").text(jQuery.i18n.map["user-settings.password-match"]),!0;$(this).addClass("disabled");$.ajax({type:"POST",url:countlyGlobal.path+"/user/settings",
data:{username:b,old_pwd:a,new_pwd:c,_csrf:countlyGlobal.csrf_token},success:function(a){var c=$(".dialog #settings-save-result");"username-exists"==a?c.removeClass("green").addClass("red").text(jQuery.i18n.map["management-users.username.exists"]):a?(c.removeClass("red").addClass("green").text(jQuery.i18n.map["user-settings.success"]),$(".dialog #old_pwd").val(""),$(".dialog #new_pwd").val(""),$(".dialog #re_new_pwd").val(""),$("#menu-username").text(b)):c.removeClass("green").addClass("red").text(jQuery.i18n.map["user-settings.alert"]);
$(".dialog #save-account-details").removeClass("disabled")}})});$(".apps-scrollable").slimScroll({height:"100%",start:"top",wheelStep:10,position:"right",disableFadeOut:!0});var c=_.once(function(){CountlyHelpers.alert(countlyCommon.HELP_MAP["help-mode-welcome"],"black")});$(".help-toggle, #help-toggle").click(function(b){$(".help-zone-vb").tipsy({gravity:$.fn.tipsy.autoNS,trigger:"manual",title:function(){return $(this).data("help")?$(this).data("help"):""},fade:!0,offset:5,cssClass:"yellow",opacity:1,
html:!0});$(".help-zone-vs").tipsy({gravity:$.fn.tipsy.autoNS,trigger:"manual",title:function(){return $(this).data("help")?$(this).data("help"):""},fade:!0,offset:5,cssClass:"yellow narrow",opacity:1,html:!0});$("#help-toggle").toggleClass("active");$("#help-toggle").hasClass("active")?(c(),$.idleTimer("destroy"),clearInterval(d.refreshActiveView),$(".help-zone-vs, .help-zone-vb").hover(function(){$(this).tipsy("show")},function(){$(this).tipsy("hide")})):(d.refreshActiveView=setInterval(function(){d.activeView.refresh()},
countlyCommon.DASHBOARD_REFRESH_MS),$.idleTimer(countlyCommon.DASHBOARD_IDLE_MS),$(".help-zone-vs, .help-zone-vb").unbind("mouseenter mouseleave"));b.stopPropagation()});$("#user-logout").click(function(){store.remove("countly_active_app");store.remove("countly_date");store.remove("countly_location_city")});$(".beta-button").click(function(){CountlyHelpers.alert("This feature is currently in beta so the data you see in this view might change or disappear into thin air.<br/><br/>If you find any bugs or have suggestions please let us know!<br/><br/><a style='font-weight:500;'>Captain Obvious:</a> You can use the message box that appears when you click the question mark on the bottom right corner of this page.",
"black")});$("#content").on("click","#graph-note",function(){function b(){var a=$(".note-date:visible").val(),c=$(".note-date:visible").data("datepicker"),a=$.datepicker.parseDate(c.settings.dateFormat||$.datepicker._defaults.dateFormat,a,c.settings);$(".selected-date:visible").text(moment(a).format("D MMM YYYY")+", "+$(".time-picker:visible span.selected").text())}function a(b,c){var d=countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].notes;"create"==c?d?d[b.date_id]?countlyCommon.arrayAddUniq(d[b.date_id],
b.note):d[b.date_id]=[b.note]:(d={},d[b.date_id]=[b.note],countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].notes=d):"delete"==c&&d&&d[b.date_id]&&(d[b.date_id]=_.without(d[b.date_id],b.note))}CountlyHelpers.popup("#graph-note-popup");$(".note-date:visible").datepicker({numberOfMonths:1,showOtherMonths:!0,onSelect:function(){b()}});$.datepicker.setDefaults($.datepicker.regional[""]);$(".note-date:visible").datepicker("option",$.datepicker.regional[countlyCommon.BROWSER_LANG]);$(".note-popup:visible .time-picker, .note-popup:visible .note-list").slimScroll({height:"100%",
start:"top",wheelStep:10,position:"right",disableFadeOut:!0});$(".note-popup:visible .time-picker span").on("click",function(){$(".note-popup:visible .time-picker span").removeClass("selected");$(this).addClass("selected");b()});$(".note-popup:visible .manage-notes-button").on("click",function(){$(".note-popup:visible .note-create").hide();$(".note-popup:visible .note-manage").show();$(".note-popup:visible .create-note-button").show();$(this).hide();$(".note-popup:visible .create-note").hide()});
$(".note-popup:visible .create-note-button").on("click",function(){$(".note-popup:visible .note-create").show();$(".note-popup:visible .note-manage").hide();$(".note-popup:visible .manage-notes-button").show();$(this).hide();$(".note-popup:visible .create-note").show()});b();if(countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID]&&countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].notes)for(var c=_.sortBy(_.keys(countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].notes),function(b){return-parseInt(b)}),d=0;d<
c.length;d++)for(var e=countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].notes[c[d]],g=0;g<e.length;g++)$(".note-popup:visible .note-list").append('<div class="note"><div class="date" data-dateid="'+c[d]+'">'+moment(c[d],"YYYYMMDDHH").format("D MMM YYYY, HH:mm")+'</div><div class="content">'+e[g]+'</div><div class="delete-note"><i class="fa fa-trash"></i></div></div>');$(".note-popup:visible .note").length||$(".note-popup:visible .manage-notes-button").hide();$(".note-popup:visible .note-content").textcounter({max:50,
countDown:!0,countDownText:"remaining "});$(".note-popup:visible .note .delete-note").on("click",function(){var b=$(this).siblings(".date").data("dateid"),c=$(this).siblings(".content").text();$(this).parents(".note").fadeOut().remove();$.ajax({type:"POST",url:countlyGlobal.path+"/graphnotes/delete",data:{app_id:countlyCommon.ACTIVE_APP_ID,date_id:b,note:c,_csrf:countlyGlobal.csrf_token},success:function(d){if(!1==d)return!1;a({date_id:b,note:c},"delete");app.activeView.refresh()}});$(".note-popup:visible .note").length||
($(".note-popup:visible .create-note-button").trigger("click"),$(".note-popup:visible .manage-notes-button").hide())});$(".note-popup:visible .create-note").on("click",function(){if($(this).hasClass("disabled"))return!0;$(this).addClass("disabled");var b=$(".note-date:visible").val(),c=$(".note-date:visible").data("datepicker"),b=$.datepicker.parseDate(c.settings.dateFormat||$.datepicker._defaults.dateFormat,b,c.settings),d=moment(moment(b).format("D MMM YYYY")+", "+$(".time-picker:visible span.selected").text(),
"D MMM YYYY, HH:mm").format("YYYYMMDDHH"),b=$(".note-popup:visible .note-content").val();if(b.length)$(".note-popup:visible .note-content").removeClass("required-border");else return $(".note-popup:visible .note-content").addClass("required-border"),$(this).removeClass("disabled"),!0;$.ajax({type:"POST",url:countlyGlobal.path+"/graphnotes/create",data:{app_id:countlyCommon.ACTIVE_APP_ID,date_id:d,note:b,_csrf:countlyGlobal.csrf_token},success:function(b){if(!1==b)return!1;a({date_id:d,note:b},"create");
app.activeView.refresh()}});$("#overlay").trigger("click")})})});if(_.isEmpty(countlyGlobal.apps))$("#new-install-overlay").show();else if(countlyCommon.ACTIVE_APP_ID)$("#sidebar-app-select").find(".logo").css("background-image","url('"+countlyGlobal.cdn+"appimages/"+countlyCommon.ACTIVE_APP_ID+".png')"),$("#sidebar-app-select .text").text(countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].name),d.activeAppName=countlyGlobal.apps[countlyCommon.ACTIVE_APP_ID].name;else for(var e in countlyGlobal.apps){countlyCommon.setActiveApp(e);
d.activeAppName=countlyGlobal.apps[e].name;break}$.idleTimer(countlyCommon.DASHBOARD_IDLE_MS);$(document).bind("idle.idleTimer",function(){clearInterval(d.refreshActiveView)});$(document).bind("active.idleTimer",function(){d.activeView.restart();d.refreshActiveView=setInterval(function(){d.activeView.refresh()},countlyCommon.DASHBOARD_REFRESH_MS)});$.fn.dataTableExt.oPagination.four_button={fnInit:function(b,a,c){nFirst=document.createElement("span");nPrevious=document.createElement("span");nNext=
document.createElement("span");nLast=document.createElement("span");nFirst.innerHTML="<i class='fa fa-double-angle-left'></i>";nPrevious.innerHTML="<i class='fa fa-angle-left'></i>";nNext.innerHTML="<i class='fa fa-angle-right'></i>";nLast.innerHTML="<i class='fa fa-double-angle-right'></i>";nFirst.className="paginate_button first";nPrevious.className="paginate_button previous";nNext.className="paginate_button next";nLast.className="paginate_button last";a.appendChild(nFirst);a.appendChild(nPrevious);
a.appendChild(nNext);a.appendChild(nLast);$(nFirst).click(function(){b.oApi._fnPageChange(b,"first");c(b)});$(nPrevious).click(function(){b.oApi._fnPageChange(b,"previous");c(b)});$(nNext).click(function(){b.oApi._fnPageChange(b,"next");c(b)});$(nLast).click(function(){b.oApi._fnPageChange(b,"last");c(b)});$(nFirst).bind("selectstart",function(){return!1});$(nPrevious).bind("selectstart",function(){return!1});$(nNext).bind("selectstart",function(){return!1});$(nLast).bind("selectstart",function(){return!1})},
fnUpdate:function(b){if(b.aanFeatures.p)for(var a=b.aanFeatures.p,c=0,d=a.length;c<d;c++){var e=a[c].getElementsByTagName("span");0===b._iDisplayStart?(e[0].className="paginate_disabled_previous",e[1].className="paginate_disabled_previous"):(e[0].className="paginate_enabled_previous",e[1].className="paginate_enabled_previous");b.fnDisplayEnd()==b.fnRecordsDisplay()?(e[2].className="paginate_disabled_next",e[3].className="paginate_disabled_next"):(e[2].className="paginate_enabled_next",e[3].className=
"paginate_enabled_next")}}};$.fn.dataTableExt.oApi.fnStandingRedraw=function(b){if(!1===b.oFeatures.bServerSide){var a=b._iDisplayStart;b.oApi._fnReDraw(b);b._iDisplayStart=a;b.oApi._fnCalculateEnd(b)}b.oApi._fnDraw(b)};jQuery.fn.dataTableExt.oSort["customDate-asc"]=function(b,a){b=c(b);a=c(a);return b<a?-1:b>a?1:0};jQuery.fn.dataTableExt.oSort["customDate-desc"]=function(b,a){b=c(b);a=c(a);return b<a?1:b>a?-1:0};jQuery.fn.dataTableExt.oSort["dateRange-asc"]=function(b,c){b=a(b);c=a(c);return b<c?
-1:b>c?1:0};jQuery.fn.dataTableExt.oSort["dateRange-desc"]=function(b,c){b=a(b);c=a(c);return b<c?1:b>c?-1:0};jQuery.fn.dataTableExt.oSort["percent-asc"]=function(b,a){b=parseFloat($("<a></a>").html(b).text().replace("%",""));a=parseFloat($("<a></a>").html(a).text().replace("%",""));return b<a?-1:b>a?1:0};jQuery.fn.dataTableExt.oSort["percent-desc"]=function(b,a){b=parseFloat($("<a></a>").html(b).text().replace("%",""));a=parseFloat($("<a></a>").html(a).text().replace("%",""));return b<a?1:b>a?-1:
0};jQuery.fn.dataTableExt.oSort["formatted-num-asc"]=function(b,a){var c=[],c=[],b=b.replace(/[^\d\-\.\/]/g,""),a=a.replace(/[^\d\-\.\/]/g,"");0<=b.indexOf("/")&&(c=b.split("/"),b=parseInt(c[0],10)/parseInt(c[1],10));0<=a.indexOf("/")&&(c=a.split("/"),a=parseInt(c[0],10)/parseInt(c[1],10));return b-a};jQuery.fn.dataTableExt.oSort["formatted-num-desc"]=function(b,a){var c=[],c=[],b=b.replace(/[^\d\-\.\/]/g,""),a=a.replace(/[^\d\-\.\/]/g,"");0<=b.indexOf("/")&&(c=b.split("/"),b=parseInt(c[0],10)/parseInt(c[1],
10));0<=a.indexOf("/")&&(c=a.split("/"),a=parseInt(c[0],10)/parseInt(c[1],10));return a-b};jQuery.fn.dataTableExt.oSort["loyalty-asc"]=function(b,a){b=countlyUser.getLoyaltyIndex(b);a=countlyUser.getLoyaltyIndex(a);return b<a?-1:b>a?1:0};jQuery.fn.dataTableExt.oSort["loyalty-desc"]=function(b,a){b=countlyUser.getLoyaltyIndex(b);a=countlyUser.getLoyaltyIndex(a);return b<a?1:b>a?-1:0};jQuery.fn.dataTableExt.oSort["frequency-asc"]=function(b,a){b=countlyUser.getFrequencyIndex(b);a=countlyUser.getFrequencyIndex(a);
return b<a?-1:b>a?1:0};jQuery.fn.dataTableExt.oSort["frequency-desc"]=function(b,a){b=countlyUser.getFrequencyIndex(b);a=countlyUser.getFrequencyIndex(a);return b<a?1:b>a?-1:0};jQuery.fn.dataTableExt.oSort["session-duration-asc"]=function(b,a){b=countlySession.getDurationIndex(b);a=countlySession.getDurationIndex(a);return b<a?-1:b>a?1:0};jQuery.fn.dataTableExt.oSort["session-duration-desc"]=function(b,a){b=countlySession.getDurationIndex(b);a=countlySession.getDurationIndex(a);return b<a?1:b>a?-1:
0};$.extend($.fn.dataTable.defaults,{sDom:'<"dataTable-top"fpT>t<"dataTable-bottom"i>',bAutoWidth:!1,sPaginationType:"four_button",iDisplayLength:50,bDestroy:!0,bDeferRender:!0,oTableTools:{sSwfPath:countlyGlobal.cdn+"javascripts/dom/dataTables/swf/copy_csv_xls.swf",aButtons:[{sExtends:"csv",sButtonText:"Save to CSV",fnClick:function(b,a,c){for(var b=$(b).parents(".dataTables_wrapper").find(".dataTable").dataTable().fnSettings().aoColumns,a=this.fnGetTableData(a).split(/\r\n|\r|\n/g).join('","').split('","'),
d="",e=0;e<a.length;e++){a[e]=a[e].replace('"',"");if(e>=b.length){var j=e%b.length;"formatted-num"==b[j].sType?a[e]=a[e].replace(/,/g,""):"percent"==b[j].sType&&(a[e]=a[e].replace("%",""))}d=0==(e+1)%b.length?d+('"'+a[e]+'"\r\n'):d+('"'+a[e]+'", ')}this.fnSetText(c,d)}},{sExtends:"xls",sButtonText:"Save for Excel",fnClick:function(b,a,c){for(var b=$(b).parents(".dataTables_wrapper").find(".dataTable").dataTable().fnSettings().aoColumns,a=this.fnGetTableData(a).split(/\r\n|\r|\n/g).join("\t").split("\t"),
d="",e=0;e<a.length;e++){if(e>=b.length){var j=e%b.length;"formatted-num"==b[j].sType?a[e]=parseFloat(a[e].replace(/,/g,"")).toLocaleString():"percent"==b[j].sType?a[e]=parseFloat(a[e].replace("%","")).toLocaleString():"numeric"==b[j].sType&&(a[e]=parseFloat(a[e]).toLocaleString())}d=0==(e+1)%b.length?d+(a[e]+"\r\n"):d+(a[e]+"\t")}this.fnSetText(c,d)}}]},fnInitComplete:function(a){a=$("#"+a.sTableId+"_wrapper");$("<div class='save-table-data'><i class='fa fa-download-alt'></i></div>").insertBefore(a.find(".DTTT_container"));
$("<div class='search-table-data'><i class='fa fa-search'></i></div>").insertBefore(a.find(".dataTables_filter"));a.find(".dataTables_filter").html(a.find(".dataTables_filter").find("input").attr("Placeholder","Search").clone(!0));a.find(".save-table-data").on("click",function(){"hidden"==$(this).next(".DTTT_container").css("visibility")?$(this).next(".DTTT_container").css("visibility","visible"):$(this).next(".DTTT_container").css("visibility","hidden")});a.find(".search-table-data").on("click",
function(){$(this).next(".dataTables_filter").toggle();$(this).next(".dataTables_filter").find("input").focus()});a.css({"min-height":a.height()})}});$.fn.dataTableExt.sErrMode="throw"},localize:function(){var c={onlyFirstUpper:function(a){return a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()},upper:function(a){return a.toUpperCase()}};$("[data-help-localize]").each(function(){var a=$(this);void 0!=a.data("help-localize")&&a.data("help",countlyCommon.HELP_MAP[a.data("help-localize")])});$("[data-localize]").each(function(){var a=
$(this),d=a.data("localize").split("!"),e="",e=2==d.length?c[d[0]]?c[d[0]](jQuery.i18n.map[d[1]]):jQuery.i18n.prop(d[0],jQuery.i18n.map[d[1]]):jQuery.i18n.map[a.data("localize")];a.is("input[type=text]")||a.is("input[type=password]")||a.is("textarea")?a.attr("placeholder",e):a.is("input[type=button]")||a.is("input[type=submit]")?a.attr("value",e):a.text(e)})},addPageScript:function(c,a){this.pageScripts[c]||(this.pageScripts[c]=[]);this.pageScripts[c].push(a)},addRefreshScript:function(c,a){this.refreshScripts[c]||
(this.refreshScripts[c]=[]);this.refreshScripts[c].push(a)},pageScript:function(){$("#month").text(moment().year());$("#day").text(moment().format("MMM"));$("#yesterday").text(moment().subtract("days",1).format("Do"));var c=this;$(document).ready(function(){$("#sidebar-menu").find("a").removeClass("active");var a=$("#sidebar-menu").find("a[href='#"+Backbone.history.fragment+"']");a.addClass("active");var d=a.parent(".sidebar-submenu");d.prev(".item").addClass("active");a.not(":visible")&&d.slideDown();
$(".sidebar-submenu").not(d).slideUp();a=countlyCommon.getPeriod();"[object Array]"!==Object.prototype.toString.call(a)&&$("#"+a).addClass("active");"/manage/apps"==Backbone.history.fragment||"/manage/account"==Backbone.history.fragment||"/manage/users"==Backbone.history.fragment?($("#sidebar-app-select").addClass("disabled"),$("#sidebar-app-select").removeClass("active")):$("#sidebar-app-select").removeClass("disabled");if(c.pageScripts[Backbone.history.fragment]){a=0;for(d=c.pageScripts[Backbone.history.fragment].length;a<
d;a++)c.pageScripts[Backbone.history.fragment][a]()}if(c.pageScripts["#"]){a=0;for(d=c.pageScripts["#"].length;a<d;a++)c.pageScripts["#"][a]()}c.localize();$("#help-toggle").hasClass("active")&&($(".help-zone-vb").tipsy({gravity:$.fn.tipsy.autoNS,trigger:"manual",title:function(){return $(this).data("help")?$(this).data("help"):""},fade:!0,offset:5,cssClass:"yellow",opacity:1,html:!0}),$(".help-zone-vs").tipsy({gravity:$.fn.tipsy.autoNS,trigger:"manual",title:function(){return $(this).data("help")?
$(this).data("help"):""},fade:!0,offset:5,cssClass:"yellow narrow",opacity:1,html:!0}),$.idleTimer("destroy"),clearInterval(c.refreshActiveView),$(".help-zone-vs, .help-zone-vb").hover(function(){$(this).tipsy("show")},function(){$(this).tipsy("hide")}));$(".usparkline").peity("bar",{width:"100%",height:"30",colour:"#6BB96E",strokeColour:"#6BB96E",strokeWidth:2});$(".dsparkline").peity("bar",{width:"100%",height:"30",colour:"#C94C4C",strokeColour:"#C94C4C",strokeWidth:2});CountlyHelpers.setUpDateSelectors(c.activeView);
$(window).click(function(){$("#date-picker").hide();$(".cly-select").removeClass("active")});$("#date-picker").click(function(a){a.stopPropagation()});$("#date-picker-button").click(function(a){$("#date-picker").toggle();c.dateToSelected?e.datepicker("setDate",moment(c.dateToSelected).toDate()):(c.dateToSelected=moment().toDate().getTime(),e.datepicker("setDate",moment().toDate()));b.datepicker("option","maxDate",moment(c.dateToSelected).toDate());c.dateFromSelected?b.datepicker("setDate",moment(c.dateFromSelected).toDate()):
(extendDate=moment(e.datepicker("getDate")).subtract("days",30).toDate(),b.datepicker("setDate",extendDate),c.dateFromSelected=moment(e.datepicker("getDate")).subtract("days",30).toDate().getTime());e.datepicker("option","minDate",moment(c.dateFromSelected).toDate());a.stopPropagation()});var e=$("#date-to").datepicker({numberOfMonths:1,showOtherMonths:!0,maxDate:moment().toDate(),onSelect:function(a){var d=$(this).data("datepicker"),a=$.datepicker.parseDate(d.settings.dateFormat||$.datepicker._defaults.dateFormat,
a,d.settings),d=new Date(a.getTime());d.getTime()<c.dateFromSelected&&(c.dateFromSelected=d.getTime());b.datepicker("option","maxDate",d);c.dateToSelected=a.getTime()}}),b=$("#date-from").datepicker({numberOfMonths:1,showOtherMonths:!0,maxDate:moment().subtract("days",1).toDate(),onSelect:function(a){var b=$(this).data("datepicker"),a=$.datepicker.parseDate(b.settings.dateFormat||$.datepicker._defaults.dateFormat,a,b.settings),b=new Date(a.getTime());b.getTime()>c.dateToSelected&&(c.dateToSelected=
b.getTime());e.datepicker("option","minDate",b);c.dateFromSelected=a.getTime()}});$.datepicker.setDefaults($.datepicker.regional[""]);$("#date-to").datepicker("option",$.datepicker.regional[countlyCommon.BROWSER_LANG]);$("#date-from").datepicker("option",$.datepicker.regional[countlyCommon.BROWSER_LANG]);$("#date-submit").click(function(){if(!c.dateFromSelected&&!c.dateToSelected)return!1;countlyCommon.setPeriod([c.dateFromSelected,c.dateToSelected]);c.activeView.dateChanged();$(".date-selector").removeClass("selected").removeClass("active")});
$(".scrollable").slimScroll({height:"100%",start:"top",wheelStep:10,position:"right",disableFadeOut:!0});$(".widget-header").noisy({intensity:0.9,size:50,opacity:0.04,monochrome:!0});$(".checkbox").on("click",function(){$(this).toggleClass("checked")});$(".resource-link").on("click",function(){$(this).data("link")&&CountlyHelpers.openResource($(this).data("link"))})})}}),app=new AppRouter;
